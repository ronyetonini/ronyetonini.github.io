"use strict";angular.module("copycatNaturaEcommerceWebApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap","vr.directives.slider","angular-carousel","infinite-scroll","duScroll","checklist-model","currencyFilter","angulartics","angulartics.google.tagmanager","ui.utils","app.directives","app.filters","app.services"]).config(["$routeProvider","$locationProvider","$httpProvider","$compileProvider",function(a,b,c,d){b.html5Mode(!0).hashPrefix("!"),a.when("/",{templateUrl:"views/main.html"}).when("/index.jsp",{redirectTo:"/"}).when("/espaco/",{redirectTo:"/espaco"}).when("/minha-sacola",{redirectTo:"/bag"}).when("/espaco/minha-sacola",{redirectTo:"/bag"}).when("/espaco/bag",{redirectTo:"/bag"}).when("/espaco/:consultant/minha-sacola",{redirectTo:"/bag"}).when("/espaco/:consultant/bag",{redirectTo:"/bag"}).when("/destaquemodacasa",{templateUrl:"views/products/modacasa.html",controller:"ModaCasaCtrl"}).when("/product/search/:name",{templateUrl:"/views/products/list.html",controller:"ProductCtrl"}).when("/bcorp",{templateUrl:"views/newsletter/bcorp.html"}).when("/espaco/preciso-de/tododia-aconchego-cat1010021",{templateUrl:"views/newsletter/tododiaAconchego.html",controller:"CanonicalCtrl"}).when("/espaco/preciso-de/fotoequilibrio",{templateUrl:"views/newsletter/fotoEquilibrio.html",controller:"CanonicalCtrl"}).when("/espaco/preciso-de/cupomdesconto",{templateUrl:"views/newsletter/cupomDesconto.html",controller:"CanonicalCtrl"}).when("/espaco/eu-gosto/agenda-do-bem-agenda1",{templateUrl:"views/saladebemestar/agenda.html",controller:"AgendaCtrl"}).when("/espaco/:consultant/eu-gosto/agenda-do-bem-agenda1",{templateUrl:"views/saladebemestar/agenda.html",controller:"AgendaCtrl"}).when("/espaco/nossos-produtos/porto-seguro-cat1590017",{templateUrl:"/views/campanhas/porto-seguro.html",controller:"CanonicalCtrl"}).when("/espaco/:consultant/nossos-produtos/porto-seguro-cat1590017",{templateUrl:"/views/campanhas/porto-seguro.html",controller:"CanonicalCtrl"}).when("/espaco/nossos-produtos/multiplus-m1",{templateUrl:"/views/campanhas/multiplus.html",controller:"CanonicalCtrl"}).when("/espaco/:consultant/nossos-produtos/multiplus-m1",{templateUrl:"/views/campanhas/multiplus.html",controller:"CanonicalCtrl"}).when("/presentes",{redirectTo:"/espaco/nossos-produtos/presentes-9a"}).when("/espaco/nossos-produtos/:name",{templateUrl:"/views/products/list.html",controller:"ProductCtrl"}).when("/espaco/:consultant/nossos-produtos/:name",{templateUrl:"/views/products/list.html",controller:"ProductCtrl"}).when("/espaco/nossos-produtos",{redirectTo:"/lines"}).when("/product/details/:name",{templateUrl:"/views/products/details.html",controller:"ProductDetailsCtrl"}).when("/product/details/:name?sku=:sku",{templateUrl:"/views/products/details.html",controller:"ProductDetailsCtrl"}).when("/address",{templateUrl:"/views/address/select_address.html",controller:"AddressCtrl"}).when("/buy",{templateUrl:"/views/buy/buy.html",controller:"BuyCtrl"}).when("/pagamento",{templateUrl:"/views/buy/pagamento.html",controller:""}).when("/finalizacao",{templateUrl:"/views/buy/finalizacao.html",controller:"FinishOrderCtrl"}).when("/bag",{templateUrl:"/views/bag/bag.html",controller:"BagCtrl"}).when("/espaco",{templateUrl:"views/main.html",controller:"HeaderCtrl"}).when("/identity",{templateUrl:"/views/buy/identity.html",controller:"IdentityCtrl"}).when("/novo-senha",{templateUrl:"/views/user/change_password.html",controller:"ChangePasswordCtrl"}).when("/meuspedidos",{templateUrl:"/views/meuspedidos/meuspedidos.html",controller:"MeuspedidosCtrl"}).when("/naturamaisperto",{templateUrl:"/views/campanhas/naturamaisperto.html",controller:"NaturaMaisPertoCtrl"}).when("/espaco/:name",{templateUrl:function(a){return a.name.indexOf("-")>-1?"/views/products/details.html":"views/main.html"},controller:["$scope","$routeParams","$controller",function(a,b,c){var d=b.name.split("/"),e=d[d.length-1].split("-");e=e[e.length-1],e=parseInt(e),e=!isNaN(e),a.setCanonical("http://rede.natura.net/espaco/"+b.name),e&&"saladebemestar"!==d[1]&&c("ProductDetailsCtrl",{$scope:a})}]}).when("/cn/:name",{templateUrl:"views/main.html",controller:"HeaderCtrl"}).when("/espaco/:name/:product",{templateUrl:"/views/products/details.html",controller:"ProductDetailsCtrl"}).when("/lines",{templateUrl:"views/products/lines.html",controller:"LinesCtrl"}).when("/saladebemestar",{templateUrl:"views/saladebemestar/saladebemestar.html",controller:"BemEstarCtrl"}).when("/saladebemestar/:news",{templateUrl:"views/saladebemestar/saladebemestar-detalhe.html",controller:"BemEstarDetalheCtrl"}).when("/espaco/nossos-produtos/:categorias*/:name",{templateUrl:function(a){return a.name.lastIndexOf("-")>-1?"/views/products/list.html":"views/main.html"},controller:"ProductCtrl"}).when("/espaco/:consultant/nossos-produtos/:categorias*/:name",{templateUrl:function(a){return a.name.lastIndexOf("-")>-1?"/views/products/list.html":"views/main.html"},controller:"ProductCtrl"}).when("/cupom/:partner/:partnerCoupon",{templateUrl:"views/products/redirect.html",controller:"PartnerCtrl"}).when("/redirect",{templateUrl:"views/products/redirect.html",controller:"RedirectCtrl"}).when("/identifique-se",{controller:"IdentificationCtrl",templateUrl:"views/main.html"}).otherwise({redirectTo:"/"}),d.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|sms):/),c.interceptors.push("ErrorsInterceptor"),c.defaults.headers.get||(c.defaults.headers.get={}),c.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",c.defaults.headers.get["Cache-Control"]="no-cache",c.defaults.headers.get.Pragma="no-cache"}]),angular.module("app.directives",[]),angular.module("app.filters",[]),angular.module("app.services",[]),function(a,b){function c(){a.removeEventListener("load",c,!1),h=!0}function d(a){return i=i||new d.Class(a)}function e(a,b){for(var c in b)a[c]=b[c];return a}function f(){"#ath"==b.location.hash&&history.replaceState("",a.document.title,b.location.href.split("#")[0]),j.test(b.location.href)&&history.replaceState("",a.document.title,b.location.href.replace(j,"$1")),k.test(b.location.search)&&history.replaceState("",a.document.title,b.location.href.replace(k,"$2"))}var g="addEventListener"in a,h=!1;"complete"===b.readyState?h=!0:g&&a.addEventListener("load",c,!1);var i,j=/\/ath(\/)?$/,k=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/;d.intl={de_de:{ios:"Um diese Web-App zum Home-Bildschirm hinzuzufügen, tippen Sie auf %icon und dann <strong>Zum Home-Bildschirm</strong>.",android:'Um diese Web-App zum Home-Bildschirm hinzuzufügen, öffnen Sie das Menü und tippen dann auf <strong>Zum Startbildschirm hinzufügen</strong>. <small>Wenn Ihr Gerät eine Menütaste hat, lässt sich das Browsermenü über diese öffnen. Ansonsten tippen Sie auf <span class="ath-action-icon">icon</span>.</small>'},da_dk:{ios:"For at tilføje denne web app til hjemmeskærmen: Tryk %icon og derefter <strong>Føj til hjemmeskærm</strong>.",android:'For at tilføje denne web app til hjemmeskærmen, åbn browser egenskaber menuen og tryk på <strong>Føj til hjemmeskærm</strong>. <small>Denne menu kan tilgås ved at trykke på menu knappen, hvis din enhed har en, eller ved at trykke på det øverste højre menu ikon <span class="ath-action-icon">icon</span>.</small>'},en_us:{ios:"To add this web app to the home screen: tap %icon and then <strong>Add to Home Screen</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},es_es:{ios:"Para añadir esta aplicación web a la pantalla de inicio: pulsa %icon y selecciona <strong>Añadir a pantalla de inicio</strong>.",android:'Para añadir esta aplicación web a la pantalla de inicio, abre las opciones y pulsa <strong>Añadir a pantalla inicio</strong>. <small>El menú se puede acceder pulsando el botón táctil en caso de tenerlo, o bien el icono de la parte superior derecha de la pantalla <span class="ath-action-icon">icon</span>.</small>'},fi_fi:{ios:"Liitä tämä sovellus kotivalikkoon: klikkaa %icon ja tämän jälkeen <strong>Lisää kotivalikkoon</strong>.",android:'Lisätäksesi tämän sovelluksen aloitusnäytölle, avaa selaimen valikko ja klikkaa tähti -ikonia tai <strong>Lisää aloitusnäytölle tekstiä</strong>. <small>Valikkoon pääsee myös painamalla menuvalikkoa, jos laitteessasi on sellainen tai koskettamalla oikealla yläkulmassa menu ikonia <span class="ath-action-icon">icon</span>.</small>'},fr_fr:{ios:"Pour ajouter cette application web sur l'écran d'accueil : Appuyez %icon et sélectionnez <strong>Ajouter sur l'écran d'accueil</strong>.",android:'Pour ajouter cette application web sur l\'écran d\'accueil : Appuyez sur le bouton "menu", puis sur <strong>Ajouter sur l\'écran d\'accueil</strong>. <small>Le menu peut-être accessible en appyant sur le bouton "menu" du téléphone s\'il en possède un <i class="fa fa-bars"></i>. Sinon, il se trouve probablement dans la coin supérieur droit du navigateur %icon.</small>'},he_il:{ios:'<span dir="rtl">להוספת האפליקציה למסך הבית: ללחוץ על %icon ואז <strong>הוסף למסך הבית</strong>.</span>',android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},it_it:{ios:"Per aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>Aggiungi a Home</strong>.",android:'Per aggiungere questa web app alla schermata iniziale, apri il menu opzioni del browser e premi su <strong>Aggiungi alla homescreen</strong>. <small>Puoi accedere al menu premendo il pulsante hardware delle opzioni se la tua device ne ha uno, oppure premendo l\'icona <span class="ath-action-icon">icon</span> in alto a destra.</small>'},ja_jp:{ios:"このウェプアプリをホーム画面に追加するために%iconを押して<strong>ホーム画面に追加</strong>。",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},ko_kr:{ios:"홈 화면에 바로가기 생성: %icon 을 클릭한 후 <strong>홈 화면에 추가</strong>.",android:'브라우저 옵션 메뉴의 <string>홈 화면에 추가</string>를 클릭하여 홈화면에 바로가기를 생성할 수 있습니다. <small>옵션 메뉴는 장치의 메뉴 버튼을 누르거나 오른쪽 상단의 메뉴 아이콘 <span class="ath-action-icon">icon</span>을 클릭하여 접근할 수 있습니다.</small>'},nb_no:{ios:"For å installere denne appen på hjem-skjermen: trykk på %icon og deretter <strong>Legg til på Hjem-skjerm</strong>.",android:'For å legge til denne webappen på startsiden åpner en nettlesermenyen og velger <strong>Legg til på startsiden</strong>. <small>Menyen åpnes ved å trykke på den fysiske menyknappen hvis enheten har det, eller ved å trykke på menyikonet øverst til høyre <span class="ath-action-icon">icon</span>.</small>'},pt_br:{ios:"<span>Para adicionar o site NATURA à tela inicial: clique %icon e então <strong>Tela de início</strong>.</span>",android:'Para adicionar o site NATURA à tela inicial, abra o menu de opções do navegador <span class="ath-action-icon">icon</span> e toque em <strong>Adicionar à tela inicial </strong>.'},pt_pt:{ios:"Para adicionar esta app ao ecrã principal: clique %icon e depois <strong>Ecrã principal</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},nl_nl:{ios:"Om deze webapp op je telefoon te installeren, klik op %icon en dan <strong>Zet in beginscherm</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},ru_ru:{ios:'Чтобы добавить этот сайт на свой домашний экран, нажмите на иконку %icon и затем <strong>На экран "Домой"</strong>.',android:'Чтобы добавить сайт на свой домашний экран, откройте меню браузера и нажмите на <strong>Добавить на главный экран</strong>. <small>Меню можно вызвать, нажав на кнопку меню вашего телефона, если она есть. Или найдите иконку сверху справа <span class="ath-action-icon">иконка</span>.</small>'},sv_se:{ios:"För att lägga till denna webbapplikation på hemskärmen: tryck på %icon och därefter <strong>Lägg till på hemskärmen</strong>.",android:'För att lägga till den här webbappen på hemskärmen öppnar du webbläsarens alternativ-meny och väljer <strong>Lägg till på startskärmen</strong>. <small>Man hittar menyn genom att trycka på hårdvaruknappen om din enhet har en sådan, eller genom att trycka på menyikonen högst upp till höger <span class="ath-action-icon">icon</span>.</small>'},zh_cn:{ios:"如要把应用程式加至主屏幕,请点击%icon, 然后<strong>加至主屏幕</strong>",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'},zh_tw:{ios:"如要把應用程式加至主屏幕, 請點擊%icon, 然後<strong>加至主屏幕</strong>.",android:'To add this web app to the home screen open the browser option menu and tap on <strong>Add to homescreen</strong>. <small>The menu can be accessed by pressing the menu hardware button if your device has one, or by tapping the top right menu icon <span class="ath-action-icon">icon</span>.</small>'}};for(var l in d.intl)d.intl[l.substr(0,2)]=d.intl[l];d.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,logging:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:0,lifespan:5e3,displayPace:1440,maxDisplayCount:1,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,privateModeOverride:!0,detectHomescreen:!1};var m=a.navigator.userAgent,n=a.navigator;e(d,{hasToken:"#ath"==b.location.hash||j.test(b.location.href)||k.test(b.location.search),isRetina:a.devicePixelRatio&&a.devicePixelRatio>1,isIDevice:/iphone|ipod|ipad/i.test(m),isMobileChrome:m.indexOf("Android")>-1&&/Chrome\/[.0-9]*/.test(m)&&-1==m.indexOf("Version"),isMobileIE:m.indexOf("Windows Phone")>-1,language:n.language&&n.language.toLowerCase().replace("-","_")||""}),d.language=d.language&&d.language in d.intl?d.language:"en_us",d.isMobileSafari=d.isIDevice&&m.indexOf("Safari")>-1&&m.indexOf("CriOS")<0,d.OS=d.isIDevice?"ios":d.isMobileChrome?"android":d.isMobileIE?"windows":"unsupported",d.OSVersion=m.match(/(OS|Android) (\d+[_\.]\d+)/),d.OSVersion=d.OSVersion&&d.OSVersion[2]?+d.OSVersion[2].replace("_","."):0,d.isStandalone="standalone"in a.navigator&&a.navigator.standalone,d.isTablet=d.isMobileSafari&&m.indexOf("iPad")>-1||d.isMobileChrome&&m.indexOf("Mobile")<0,d.isCompatible=d.isMobileSafari&&d.OSVersion>=6||d.isMobileChrome;var o={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};d.removeSession=function(a){try{if(!localStorage)throw new Error("localStorage is not defined");localStorage.removeItem(a||d.defaults.appID)}catch(b){}},d.doLog=function(a){this.options.logging&&console.log(a)},d.Class=function(c){if(this.doLog=d.doLog,this.options=e({},d.defaults),e(this.options,c),g){if(this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=this.options.detectHomescreen===!0?"hash":this.options.detectHomescreen,this.options.debug&&(d.isCompatible=!0,d.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==d.OS?"android":d.OS,d.OSVersion="ios"==d.OS?"8":"4"),this.container=b.documentElement,this.session=this.getItem(this.options.appID),this.session=this.session?JSON.parse(this.session):void 0,!d.hasToken||d.isCompatible&&this.session||(d.hasToken=!1,f()),!d.isCompatible)return void this.doLog("Add to homescreen: not displaying callout because device not supported");this.session=this.session||o;try{if(!localStorage)throw new Error("localStorage is not defined");localStorage.setItem(this.options.appID,JSON.stringify(this.session)),d.hasLocalStorage=!0}catch(h){d.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}for(var i=!this.options.validLocation.length,j=this.options.validLocation.length;j--;)if(this.options.validLocation[j].test(b.location.href)){i=!0;break}if(this.getItem("addToHome")&&this.optOut(),this.session.optedout)return void this.doLog("Add to homescreen: not displaying callout because user opted out");if(this.session.added)return void this.doLog("Add to homescreen: not displaying callout because already added to the homescreen");if(!i)return void this.doLog("Add to homescreen: not displaying callout because not a valid location");if(d.isStandalone)return this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&this.options.onAdd.call(this)),void this.doLog("Add to homescreen: not displaying callout because in standalone mode");if(this.options.detectHomescreen){if(d.hasToken)return f(),this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&this.options.onAdd.call(this)),void this.doLog("Add to homescreen: not displaying callout because URL has token, so we are likely coming from homescreen");"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,b.location.href+(b.location.search?"&":"?")+"ath=")}if(!this.session.returningVisitor&&(this.session.returningVisitor=!0,this.updateSession(),this.options.skipFirstVisit))return void this.doLog("Add to homescreen: not displaying callout because skipping first visit");if(!this.options.privateModeOverride&&!d.hasLocalStorage)return void this.doLog("Add to homescreen: not displaying callout because browser is in private mode");this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&(this.doLog("Add to homescreen: autostart displaying callout"),this.show())}},d.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];b&&this[b](a)},show:function(c){if(this.options.autostart&&!h)return void setTimeout(this.show.bind(this),50);if(this.shown)return void this.doLog("Add to homescreen: not displaying callout because already shown on screen");var e=Date.now(),f=this.session.lastDisplayTime;if(c!==!0){if(!this.ready)return void this.doLog("Add to homescreen: not displaying callout because not ready");if(e-f<6e4*this.options.displayPace)return void this.doLog("Add to homescreen: not displaying callout because displayed recently");if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount)return void this.doLog("Add to homescreen: not displaying callout because displayed too many times already")}this.shown=!0,this.session.lastDisplayTime=e,this.session.displayCount++,this.updateSession(),this.applicationIcon||(this.applicationIcon=b.querySelector("ios"==d.OS?'head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]':'head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));var g="";"object"==typeof this.options.message&&d.language in this.options.message?g=this.options.message[d.language][d.OS]:"object"==typeof this.options.message&&d.OS in this.options.message?g=this.options.message[d.OS]:this.options.message in d.intl?g=d.intl[this.options.message][d.OS]:""!==this.options.message?g=this.options.message:d.OS in d.intl[d.language]&&(g=d.intl[d.language][d.OS]),g="<p>"+g.replace("%icon",'<span class="ath-action-icon">icon</span>')+"</p>",this.viewport=b.createElement("div"),this.viewport.className="ath-viewport",this.options.modal&&(this.viewport.className+=" ath-modal"),this.options.mandatory&&(this.viewport.className+=" ath-mandatory"),this.viewport.style.position="absolute",this.element=b.createElement("div"),this.element.className="ath-container ath-"+d.OS+" ath-"+d.OS+(d.OSVersion+"").substr(0,1)+" ath-"+(d.isTablet?"tablet":"phone"),this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0s;-webkit-transition-timing-function:ease-out;transition-property:transform,opacity;transition-duration:0s;transition-timing-function:ease-out;",this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)",this.element.style.transform="translate3d(0,-"+a.innerHeight+"px,0)",this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=b.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img)),this.element.innerHTML+=g,this.viewport.style.left="-99999em",this.viewport.appendChild(this.element),this.container.appendChild(this.viewport),this.img?this.doLog("Add to homescreen: not displaying callout because waiting for img to load"):this._delayedShow()},_delayedShow:function(){setTimeout(this._show.bind(this),1e3*this.options.startDelay+500)},_show:function(){var c=this;this.updateViewport(),a.addEventListener("resize",this,!1),a.addEventListener("scroll",this,!1),a.addEventListener("orientationchange",this,!1),this.options.modal&&b.addEventListener("touchmove",this,!0),this.options.mandatory||setTimeout(function(){c.element.addEventListener("click",c,!0)},1e3),setTimeout(function(){c.element.style.webkitTransitionDuration="1.2s",c.element.style.transitionDuration="1.2s",c.element.style.webkitTransform="translate3d(0,0,0)",c.element.style.transform="translate3d(0,0,0)"},0),this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1e3*this.options.lifespan)),this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer),this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1)),$("#addHome").hide(),a.removeEventListener("resize",this,!1),a.removeEventListener("scroll",this,!1),a.removeEventListener("orientationchange",this,!1),b.removeEventListener("touchmove",this,!0),this.element.removeEventListener("click",this,!0),this.element.addEventListener("transitionend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("MSTransitionEnd",this,!1),this.element.style.webkitTransitionDuration="0.3s",this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1),this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("MSTransitionEnd",this,!1),this.container.removeChild(this.viewport),this.shown=!1,this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px",this.viewport.style.height=a.innerHeight+"px",this.viewport.style.left=a.scrollX+"px",this.viewport.style.top=a.scrollY+"px";var c=b.documentElement.clientWidth;this.orientation=c>b.documentElement.clientHeight?"landscape":"portrait";var e="ios"==d.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>c?1:e/a.innerWidth,this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){d.hasLocalStorage!==!1&&localStorage&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=o,this.updateSession()},getItem:function(a){try{if(!localStorage)throw new Error("localStorage is not defined");return localStorage.getItem(a)}catch(b){d.hasLocalStorage=!1}},optOut:function(){this.session.optedout=!0,this.updateSession()},optIn:function(){this.session.optedout=!1,this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0,this.updateSession()},_preventDefault:function(a){a.preventDefault(),a.stopPropagation()}},a.addToHomescreen=d}(window,document),function(){function a(a,b){function c(){return r}function d(){function b(a){var b=a.data;if("SUCCESS"===b.status&&(p=b.result,b.result.length>0))for(var c=0;c<b.result.length;c++)b.result[c].open=!1;return b}return a.get("/api/address/list").then(b)}function e(b){function c(a){var b=a.data;return b.result&&b.result.isPartnerGift&&(r=!0),b}return a.get("/api/checkout/shipment/get/"+b).then(c)}function f(b){function c(a){var b=a.data;return b}return a.get("/api/address/remove/"+b).then(c)}function g(b){function c(a){var b=a.data;return r=b.result&&b.result.isPartnerGift?!0:!1,b}var d=b;return a.post("/api/checkout/shipment/select",d).then(c)}function h(b){function c(a){var b=a.data;return""===b.result.city&&(b.status="ERROR"),b}return a.get("/api/address/get/"+b).then(c)}function i(b){function c(a){var b=a.data;return b}var d=b;return a.post("/api/address/add",d).then(c)}function j(b){function c(a){var b=a.data;return b}var d=b;return a.post("/api/address/edit",d).then(c)}function k(a){q=a}function l(){function b(a){var b=a.data;return b}return a.get("api/checkout/useterms").then(b)}function m(a){"REMOVE"!==a?b.add("userAcceptanceNeeded",a):b.remove("userAcceptanceNeeded")}function n(){return b.get("userAcceptanceNeeded")}function o(a){r=a}var p={},q={},r=!1,s={loadAddresses:d,calculateShipment:e,getAddressByZipCode:h,updateAddress:j,newAddress:i,deleteAddress:f,putAddress:g,setSelectedAddress:k,loadTerms:l,setTermsAccepted:m,getTermsAccepted:n,isPartnerGiftPurchase:c,setPartnerGiftPurchase:o};return s}angular.module("copycatNaturaEcommerceWebApp").factory("AddressService",["$http","LocalStorageService",a])}(),function(){function a(a){function b(b){function d(a){var b=a.data;return"SUCCESS"===b.status&&(c=b.result),b}return a.get("/api/autocomplete/"+b).then(d)}var c=[],d={getTherms:b};return d}angular.module("copycatNaturaEcommerceWebApp").factory("AutoCompleteService",["$http",a])}(),function(){function a(a,b,c){function d(){return q}function e(a){q=a,c.add("bag",q)}function f(){function b(a){var b=a.data;return q=b.result,c.add("bag",q),b}return a.get("/api/cart/get").then(b)}function g(b,d){function e(a){var b=a.data;return"SUCCESS"===b.status&&(q=b.result,c.add("bag",q)),b}var f={cart:{productId:b.hasParent?b.parentProductId:b.productId,skuId:b.sku||b.skuId,quantity:d||b.quantity,productUrl:b.productUrl||b.link,commerceItemId:b.commerceItemId}};return a.post("/api/cart/add",f).then(e)}function h(b){function d(a){var b=a.data;return q=b.result,c.add("bag",q),b}return a.get("/api/cart/remove/"+b).then(d)}function i(b){function c(a){var b=a.data;return b}var d={request:b};return a.post("/api/cart/gift",d).then(c)}function j(){function b(a){var b=a.data;return b}return a.get("/api/verifyUser").then(b)}function k(){return r}function l(a){r=a}function m(){q={},c.remove("bag")}function n(b){function d(a){var b=a.data;return"SUCCESS"===b.status&&(q=b.result.cart.response,c.add("bag",q),null!==c.get("coupon")&&c.remove("coupon")),b}var e={coupon:{couponCode:b}};return a.post("/api/cart/coupon",e).then(d)}function o(){function b(a){var b=a.data;return"SUCCESS"===b.status&&(q=b.result.cart.response,c.add("bag",q)),b}return a.get("/api/cart/coupon/remove").then(b)}function p(b){function d(a){var b=a.data;return q=b.result,c.add("bag",q),b}return a.get("/api/cart/addExternal?items="+b).then(d)}var q=c.get("bag")||{},r=!1,s={getBag:d,setBag:e,loadBag:f,addInBag:g,removeBag:h,addGift:i,validateBuy:j,getTryToCheckout:k,setTryToCheckout:l,clearBag:m,useCoupon:n,removeCoupon:o,addExternalBag:p};return s}angular.module("copycatNaturaEcommerceWebApp").factory("BagService",["$http","$location","LocalStorageService",a])}(),function(){function a(a,b){function c(){function b(a){var b=a.data;if("SUCCESS"===b.status){for(var c in b.result)if("shoppables"===c)for(var d=0;d<b.result[c].length;d++)b.result[c][d].image="http:"+b.result[c][d].image;else b.result[c].image="http:"+b.result[c].image;f=b.result}return b}return a.get("/api/welfarelounge").then(b)}function d(){function c(a){var b=a.data;return b.actualIndex=0,b.result}var d=b.path(),e=d.split("/");return d=e[e.length-1],a.get("/api/welfarelounge/"+d).then(c)}function e(b){function c(a){var b=a.data;return b}return a.get("/api/product/"+b).then(c)}var f=[],g={getBoxes:c,getDetail:d,getProduct:e};return g}angular.module("app.services").factory("BemEstarService",["$http","$location",a])}(),function(){function a(a,b,c,d,e){function f(b){function f(a){var b=a.data;if(b.result&&b.result.orderNumber){if(m=b.result,b.result.paymentCreditCard){switch(b.result.paymentCreditCard){case"Mastercard":m.cardImage="master.png",m.cardName="Mastercard";break;case"Elo":m.cardImage="elo.png",m.cardName="Elo";break;case"Visa":m.cardImage="visa.png",m.cardName="Visa";break;case"American":m.cardImage="amex.png",m.cardName="American Express";break;case"Hiper":m.cardImage="hipercard.png",m.cardName="Hipercard";break;case"Diners":m.cardImage="diners.png",m.cardName="Diners"}b.result=m}var f=d.getUser(),g=c.getBag();e.mappingFinish(f,m,g)}return b}var g={request:b};return a.post("/api/checkout/buy",g).then(f)}function g(){return m}function h(){l=b.get("buyCounter"),l?(l+=1,b.add("buyCounter",l)):b.add("buyCounter",1)}function i(){return l=b.get("buyCounter")}function j(){h(),k=1===l?!0:!1,b.add("firstBuy",k)}var k,l,m={},n={buy:f,getOrder:g,setFirstBuy:j,getBuyCounter:i};return n}angular.module("copycatNaturaEcommerceWebApp").factory("BuyService",["$http","LocalStorageService","BagService","UserService","ChaordicService",a])}(),function(){function a(a){function b(b){try{a.Recaptcha.create(b,"recaptcha_widget",{theme:"custom"})}catch(c){}}var c={render:b};return c}angular.module("app.services").factory("CaptchaService",["$window",a])}(),function(){function a(a){function b(b){try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"home"},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn}}):a.chaordic_meta={page:{timestamp:new Date,name:"home"}}}catch(c){}}function c(b,c){c=c.replace("</strong>","").replace("<strong>",""),c=c.split("/");for(var d=[],e=0;e<c.length;e++)d.push({name:c[e].trim()});try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"category",categories:d},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn}}):a.chaordic_meta={page:{timestamp:new Date,name:"category",categories:d}}}catch(f){}}function d(b,c){var d=c.thumbNailImageUrl.split("/");d=d[d.length-2].replace("listing_","");var e={};e[d]=c.thumbNailImageUrl;for(var f=[],g=c.keywords?c.keywords:[],h=0;h<g.length;h++)f.push({name:g[h]});try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"product",partner:"mobile"},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn},product:{id:c.productId,name:c.name,url:c.productUrl,images:e,status:c.unavailable?"unavailable":"available",price:c.discountedPrice?c.discountedPrice:c.listPrice,categories:f}}):a.chaordic_meta={page:{timestamp:new Date,name:"product",partner:"mobile"},product:{id:c.productId,name:c.name,url:c.productUrl,images:e,status:c.unavailable?"unavailable":"available",price:c.discountedPrice?c.discountedPrice:c.listPrice,categories:f}}
}catch(i){}}function e(b,c,d){for(var e=[],f=0;f<d.length;f++)e.push({id:d[f].productId,price:d[f].discountedPrice?d[f].discountedPrice:d[f].listPrice});try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"search",search:{query:c,items:e}},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn}}):a.chaordic_meta={page:{timestamp:new Date,name:"search",search:{query:c,items:e}}}}catch(g){}}function f(b){try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"checkout"},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn}}):a.chaordic_meta={page:{timestamp:new Date,name:"checkout"}}}catch(c){}}function g(b,c){for(var d=[],e=0;e<c.commerceItems.length;e++)c.commerceItems[e].formattedUnitListPrice&&0!==parseFloat(c.commerceItems[e].formattedAmount.replace("R$ ","").replace(",","."))&&d.push({product:{id:c.commerceItems[e].productId,sku:c.commerceItems[e].skuId,price:parseFloat(c.commerceItems[e].formattedUnitListPrice.replace("R$ ","").replace(",","."))},quantity:c.commerceItems[e].quantity});try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"cart"},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn},cart:{id:c.orderId,items:d}}):a.chaordic_meta={page:{timestamp:new Date,name:"cart"},cart:{id:c.orderId,items:d}}}catch(f){}}function h(b,c,d){for(var e=[],f=0;f<d.commerceItems.length;f++)0!==parseFloat(d.commerceItems[f].formattedAmount.replace("R$ ","").replace(",","."))&&e.push({product:{id:d.commerceItems[f].productId,sku:d.commerceItems[f].skuId,price:parseFloat(d.commerceItems[f].listPrice.replace("R$ ","").replace(",","."))},quantity:parseInt(d.commerceItems[f].quantity)});try{b?(b.emailOptIn="yes"===b.emailOptIn,a.chaordic_meta={page:{timestamp:new Date,name:"confirmation"},user:{id:b.id,name:b.name+" "+b.surname,email:b.email,allow_mail_marketing:b.emailOptIn},transaction:{id:c.orderId,installment_count:c.paymentInstallments?parseInt(c.paymentInstallments):1,shipping:{costs:parseFloat(c.shipment.replace("R$ ","").replace(",","."))},items:e}}):a.chaordic_meta={page:{timestamp:new Date,name:"confirmation"},transaction:{id:c.orderId,installment_count:c.paymentInstallments?parseInt(c.paymentInstallments):1,shipping:{costs:parseFloat(c.shipment.replace("R$ ","").replace(",","."))},items:e}}}catch(g){}}function i(){try{a.chaordic.initialize()}catch(b){}}var j={mappingHome:b,mappingCategory:c,mappingProduct:d,mappingSearch:e,mappingBag:g,mappingCheckout:f,mappingFinish:h,init:i};return j}angular.module("app.services").factory("ChaordicService",["$window",a])}(),function(){function a(a,b,c){function d(){return s}function e(){return t}function f(){return u}function g(){function b(a){var b=a.data;return"SUCCESS"===b.status&&(v=b.result),b}return a.get("/api/suggest").then(b)}function h(b){function c(a){var b=a.data;return"SUCCESS"===b.status&&(b.result.actualPage=y,z=z.concat(b.result.listCns),b.result.listCns=z,y++,A=b.result.cnCount),b}b!==x&&(y=1,x=b,z=[],A=null);var d={cns:{page:y,searchQuery:b,cnCount:A}};return a.post("/api/cns",d).then(c)}function i(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function j(b){function d(a){var b=a.data;return"SUCCESS"===b.status&&(i(b.result)?(b.status="USER_ERROR",b.userErrorKey="INVALID_CONSULTANT"):(s=b.result,c.add("consultant",s))),b}return b.cnUserName&&(b.cnSpaceId=b.cnUserName),a.get("/api/cn/"+b.cnSpaceId.toLowerCase()).then(d)}function k(){function b(a){var b=a.data;return"SUCCESS"===b.status&&(s={},t=!1,u="Consultor(a) Natura",c.remove("consultant")),b}return a.get("/api/removeCn").then(b)}function l(b){function c(a){var b=a.data;return b}return a.post("/api/evaluateCn",b).then(c)}function m(){return w}function n(a){w=a}function o(){z=[],y=1}function p(){return r}function q(a){r=a}var r,s=c.get("consultant"),t=s?!0:!1,u=t?s.name:"Consultor(a) Natura",v={},w=!1,x="",y=1,z=[],A=null,B={getConsultant:d,getConsultantSelected:e,getConsultantName:f,getRecommendedConsultant:g,getConsultantList:h,setConsultant:j,removeConsultant:k,ratingCN:l,getHasToRemoveConsultant:m,setHasToRemoveConsultant:n,clearConsultantSearch:o,isConsultantArea:p,setIsConsultantArea:q};return B}angular.module("copycatNaturaEcommerceWebApp").factory("ConsultantService",["$http","$location","LocalStorageService",a])}(),function(){function a(){function a(a,b){var c=new Date;c.setTime(c.getTime()+7776e6);var d="expires="+c.toUTCString();document.cookie=a+"="+b+"; "+d}function b(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return""}function c(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}var d={add:a,get:b,remove:c};return d}angular.module("app.services").factory("CookieService",a)}(),function(){function a(a,b,c,d){function e(e,i,j){var k,l,m,n=c.defer(),o=n.promise,p=angular.isDefined(j)&&!j,q=!1;angular.forEach(g,function(a,b){angular.equals(g[b].fn,e)&&(q=!0,m=b)}),q?(f[g[m].timeoutId].reject("bounced"),b.defer.cancel(g[m].timeoutId)):(m=h++,g[m]={fn:e});var r=function(){delete g[m];try{n.resolve(e())}catch(b){n.reject(b),d(b)}p||a.$apply()};return k=b.defer(r,i),g[m].timeoutId=k,l=function(){delete f[o.$$timeoutId]},o.$$timeoutId=k,f[k]=n,o.then(l,l),o}var f={},g={},h=0;return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),b.defer.cancel(a.$$timeoutId)):!1},e}angular.module("app.services").factory("$debounce",["$rootScope","$browser","$q","$exceptionHandler",a])}(),function(){function a(a){function b(b){function c(a){var b=a.data;return b}return a.post("/api/notify",b).then(c)}function c(b){function c(a){var b=a.data;return b}return a.post("/api/checkout/sendemail",b).then(c)}function d(b){function c(a){var b=a.data;return b}return a.post("/api/forgotPassword",b).then(c)}var e={notifyProductUnavailable:b,sendPaymentBoleto:c,forgotPassword:d};return e}angular.module("copycatNaturaEcommerceWebApp").factory("EmailService",["$http",a])}(),angular.module("copycatNaturaEcommerceWebApp").factory("ErrorService",["$location","LocalStorageService",function(a,b){return{dealWith:function(c){var d=b.get("user"),e=b.get("consultant"),f=b.get("bag");return c&&c.data&&(-1!==a.path().indexOf("address")?null===d||null===f||f.commerceItems&&0===f.commerceItems.length?a.path("/"):null===d.cpf||""===d.cpf?a.path("/identity"):d.cpf&&null===e&&a.path("/"):-1!==a.path().indexOf("buy")?(null===e||null===d||null===f||f.commerceItems&&0===f.commerceItems.length)&&a.path("/"):-1!==a.path().indexOf("meuspedidos")&&null===d&&a.path("/")),!0},dealWithResponseError:function(b){401===b.status&&b.data&&"INVALID_SESSION"===b.data.status?a.path("/"):b.status>=500&&b.status<600&&a.path("/")}}}]),function(){function a(a,b,c,d,e,f,g){function h(b){try{a.dataLayer.push(b)}catch(c){}}function i(){var a,i,j,k=d.getUser(),l=c.getConsultant();if(null!==k?(i={mod_uid:k.id},h(i),j={u_logged:"true"},h(j),"true"===k.isCnUser?(a={u_category:"cnd"},h(a)):(a={u_category:"cf"},h(a))):(j={u_logged:!1},h(j)),l&&null!==l){var m={mob_cnd:l.cnUserName};h(m)}if("finalizacao"===e.getView()){var n="";n=g.isPartnerGiftPurchase()?f.getBag():b.getOrder();for(var o=[],p=0;p<n.bag.length;p++)o.push({sku:n.bag[p].productSkuId,name:n.bag[p].productName,price:n.bag[p].productUnitPrice,quantity:n.bag[p].productQuantity});var q={transactionId:n.orderId,transactionAffiliation:l.cnUserName,transactionTotal:n.total,transactionShipping:n.shipment,transactionProducts:o};h(q)}}function j(){var a={u_logged:"true"};h(a)}function k(){var a={event:"shareFacebook"};h(a),console.log("tag enviada.")}function l(){var a={event:"modalAddToHome"};h(a)}var m={push:h,sendTags:i,sendTagLogged:j,shareFbCallback:k,addToHomeCallback:l};return m}angular.module("app.services").factory("GoogleTagManagerService",["$window","BuyService","ConsultantService","UserService","UrlService","BagService","AddressService",a])}(),function(){function a(a){function b(){return g}function c(a){g=a}function d(){return h}function e(a){h=a}function f(){a.location.href=d()}var g=!1,h="/",i={getCouponUrl:d,setCouponUrl:e,getTryToApplyCoupon:b,setTryToApplyCoupon:c,proceedToCouponUrl:f};return i}angular.module("copycatNaturaEcommerceWebApp").factory("IdentificationService",["$window",a])}(),function(){function a(a){function b(b,c){(angular.isObject(c)||angular.isArray(c))&&(c=angular.toJson(c)),e()?localStorage.setItem(b,c):a.add(b,c)}function c(b){if(e())try{return JSON.parse(localStorage.getItem(b))}catch(c){return localStorage.getItem(b)}else try{return JSON.parse(a.get(b))}catch(c){return a.get(b)}}function d(b){return e()?localStorage.removeItem(b):void a.remove(b)}function e(){if("undefined"!=typeof Storage){try{localStorage.test=2}catch(a){return!1}return!0}return!1}var f={add:b,get:c,remove:d,hasSupport:e};return f}angular.module("copycatNaturaEcommerceWebApp").factory("LocalStorageService",["CookieService",a])}(),function(){function a(){function a(a){g=a}function b(){return g}function c(a,b){function c(a){return a.replace("<strong>","").replace("</strong>","")}var d;g="Linhas"!==b?!0:!1,1===a?h="<strong>"+b+"</strong>":2===a?(h=c(h),d=h.split("/"),h=d[0]+" / <strong>"+b+"</strong>"):3===a&&(h=c(h),d=h.split("/"),h=d[0]+" / "+d[1]+" / <strong>"+b+"</strong>")}function d(){return h}function e(a){i=a}function f(){return i}var g=!1,h="",i=!1,j={setShowBreadcrumb:a,getShowBreadcrumb:b,setBreadcrumb:c,getBreadcrumb:d,setAccessProductsFromMenu:e,getAccessProductsFromMenu:f};return j}angular.module("copycatNaturaEcommerceWebApp").factory("MenuService",a)}(),function(){function a(a){function b(){function b(a){var b=a.data;return"SUCCESS"===b.status&&(b.stopPagination=b.result.pages&&f!==parseInt(b.result.pages)?!1:!0,e=e.concat(b.result.orders),b.result.orders=e,f++),b}return a.get("/api/orders/"+f).then(b)}function c(){function b(a){var b=a.data;return"SUCCESS"===b.status&&(b.stopPagination=b.result.pages&&h!==parseInt(b.result.pages)?!1:!0,g=g.concat(b.result.orders),b.result.orders=g,h++),b}return a.get("/api/ordersHistory/"+h).then(b)}function d(){f=1,e=[],h=1,g=[]}var e=[],f=1,g=[],h=1,i={getOrdersOpened:b,getOrdersHistory:c,resetOrders:d};return i}angular.module("app.services").factory("MeusPedidosService",["$http",a])}(),function(){function a(a){function b(b){function c(a){var b=a.data;return b}return a.post("/api/partner",b).then(c)}function c(b){function c(a){var b=a.data;return b}return a.post("/api/import/partner",b).then(c)}var d={loadPartner:b,importPartnerProducts:c};return d}angular.module("copycatNaturaEcommerceWebApp").factory("PartnerService",["$http",a])}(),function(){function a(a,b,c,d,e){function f(b){function c(a){var c=a.data;if(c.products&&c.products.length>0){c.status="SUCCESS";for(var f=0;f<c.products.length;f++)c.products[f].listPrice=c.products[f].listPrice,c.products[f].discountedPrice=c.products[f].discountedPrice,c.products[f].actualIndex=0;n=n.concat(c.products),c.products=n,m++;var g=d.getUser();e.mappingSearch(g,b,n)}return c}b!==p&&(p=b,m=1,n=[]);var f={search:{categories:{},lines:[],maxPrice:500,minPrice:0,page:m,query:b}};return a.post("/api/busca",f).then(c)}function g(b){function c(a){var b=a.data;if(b.products&&b.products.length>0){b.status="SUCCESS";for(var c=0;c<b.products.length;c++)null!==b.products[c]&&(b.products[c].actualIndex=0)}else b.products&&0===b.products.length&&b.categoryImageHeader&&(b.status="SUCCESS");return n=n.concat(b.products),b.products=n,m++,b.categoryImageHeader&&(b.categoryImageHeader=b.categoryImageHeader.indexOf("//")>-1?"http:"+b.categoryImageHeader:"http://rede.natura.net"+b.categoryImageHeader),b}return b!==o&&(o=b,m=1,n=[]),a.get("/api/category/"+b+"/"+m).then(c)}function h(){function b(a){var b=a.data;return b}return a.get("/api/lines").then(b)}function i(b){function c(a){var b=a.data;if(b.name){b.status="SUCCESS";var c=d.getUser();e.mappingProduct(c,b)}return b}return a.get("/api/product/"+b).then(c)}function j(){m=1,n=[],o="",p=""}function k(){function b(a){for(var b=a.data,c=0;c<b.result.length;c++)b.result[c].img="http://www.natura.com.br"+b.result[c].img,b.result[c].url=b.result[c].url.replace("http://rede.natura.net/","");return b}return a.get("/api/naturamaisperto").then(b)}function l(a){m=a}var m=1,n=[],o="",p="",q={loadSearchedProducts:f,loadProducts:g,loadLines:h,loadProductDetail:i,resetServiceToLoadProducts:j,naturaMaisPerto:k,setPage:l};return q}angular.module("copycatNaturaEcommerceWebApp").factory("ProductService",["$http","$filter","LocalStorageService","UserService","ChaordicService",a])}(),function(){angular.module("copycatNaturaEcommerceWebApp").constant("REGEX",{email:/^[a-zA-Z0-9]{1}[a-zA-Z0-9\.\_\-]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}(\.[a-zA-Z]{2,3})?$/,nameRegex:/^[a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð¡ ,.'-]+( [a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð¡ ,.'-]+)+$/,ruaRegex:/^[0-9a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð¡ ,.'-]$/,cpfRegex:/^[0-9]{11}$/,zipcodeRegex:/^[0-9]{8}$/,rgIssuingAgencyRegex:/^[A-z]+$/,date:/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/,completePhoneNumberRegex:/^[0-9]{10,11}$/,dddRegex:/^[0-9]{2}$/,landlinePhoneNumberRegex:/^[0-9]{8,9}$/,expDate:/(^(1[0-2]|0[1-9]|\d)\/([2-9]\d[1-9]\d|[1-9]\d)$)/,cityCodeRegex:/^[0-9;]$/,onlyDigits:/^\d{1,16}$/,extractFirstAndLastName:/([a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð¡.']+)\s([a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð¡.'\s]+)/})}(),function(){function a(a,b){function c(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={user:c};return a.post("/api/login",e).then(d)}function d(){function c(a){var c=a.data;return"SUCCESS"===c.status&&(p=!1,o={},b.remove("user")),c}return a.get("/api/logout").then(c)}function e(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={request:c};return a.post("/api/register",e).then(d)}function f(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={request:c};return a.post("/api/gigya/register",e).then(d)}function g(){return p}function h(){return o}function i(){return o.email}function j(){return b.get("user")}function k(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={request:c};return a.post("/api/update",e).then(d)}function l(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={request:c};return a.post("/api/recoverPassword",e).then(d)}function m(c){function d(a){var c=a.data;return"SUCCESS"===c.status&&(p=!0,o=c.result,b.add("user",o)),c}var e={userData:c};return a.post("/api/gigya/login",e).then(d)}function n(b){function c(a){var b=a.data;return b}var d={request:b};return a.post("/api/gigya/associate-user",d).then(c)}var o=b.get("user"),p=o?!0:!1,q={login:c,logout:d,register:e,socialRegister:f,getUserLogged:g,getUser:h,getEmail:i,updateUser:k,getFromLocalStorage:j,changePassword:l,socialLogin:m,associateUser:n};return q}angular.module("copycatNaturaEcommerceWebApp").factory("UserService",["$http","LocalStorageService",a])}(),function(){angular.module("copycatNaturaEcommerceWebApp").constant("UserErrorService",{EMAIL_REQUIRED:"O e-mail é obrigatório.",EMAIL_INVALID:"O e-mail é inválido.",INVALID_EMAIL:"O e-mail é inválido.",EMAIL_NOT_EQUALS:"Os e-mails não coincidem",PASSWORD_REQUIRED:"A senha é obrigatória.",PASSWORD_SHORT:"A senha deve ter pelo menos 6 caracteres.",PASSWORD_NOT_EQUALS:"As senhas não coincidem",FIRSTNAME_REQUIRED:"O nome é obrigatório.",FULLNAME_REQUIRED:"O nome é obrigatório.",FULLNAME_INVALID:"O nome informado não é válido",LASTNAME_REQUIRED:"O sobrenome é obrigatório.",CPF_REQUIRED:"O CPF é obrigatório.",CPF_INVALID:"O CPF informado não é válido.",GENDER_REQUIRED:"O sexo é obrigatório.",BIRTHDAY_REQUIRED:"A data de nascimento é obrigatória.",BIRTHDAY_INVALID:"A data de nascimento informada não é válida",BIRTHDAY_RANGE:"É necessário ter entre 16 e 100 anos para se cadastrar.",DDD_REQUIRED:"O DDD é obrigatório",DDD_INVALID:"O DDD informado não é válido.",PHONE_REQUIRED:"O telefone é obrigatório",PHONE_INVALID:"O telefone informado não é válido",TERM_NOT_ACCEPTED:"É necessário aceitar os termos de uso.",SEARCH_CN_TOO_SHORT:"A busca precisa ter pelo menos 3 caracteres.",SEARCH_CN_CEP_TOO_SHORT:"Para realizar a busca por CEP são necessários 8 caracteres.",INVALID_CARD:"O cartão de crédito informado é inválido.",RATING_NOT_SELECTED:"Para avaliar o(a) consultor(a), você deve escolher a nota.",FORBIDDEN_EMAIL:"Não foi possível obter seu e-mail. Verifique se está visível nas configurações de privacidade do Facebook.",INVALID_COUPON:"Desculpe, mas esse não é um cupom válido. Por favor, verifique e digite novamente.",INELIGIBLE_COUPON:"Desculpe, mas esse não é um cupom elegível. Por favor, verifique as regras da promoção e digite novamente.",APO_CITY:"Devido a limitações de transporte, não podemos enviar para endereços que a cidade contenha Apo.",INVALID_ZIPCODE:"Cep inválido",UNAVAILABLE_FOR_SALE:"Este produto não está disponível para a venda fora da campanha!",COUPON_PARTNER_ERROR:"Esse cupom já foi resgatado",GIFT_OUT_OF_STOCK:"O produto escolhido não encontra-se em nosso estoque. Por favor, selecione outro item ou tente novamente mais tarde.",CONSULTANT_SELECT_ERROR:"Selecione um consultor para concluir o cadastro.",NO_CN_SELECTED:"Selecione um consultor para finalizar a compra.",INVALID_LOGIN:"O email e/ou a senha fornecidos estão incorretos.",USER_ALREADY_EXISTS:"O usuário já existe.",EMAIL_ALREADY_EXISTS:"O e-mail informado já está cadastrado.",CPF_ALREADY_EXISTS:"O CPF informado já está cadastrado.",CONSULTOR_NOT_FOUND_SEARCH:"Não foram encontrados consultores para sua busca, sugerimos:<br><br>* Informe o nome do consultor<br>* Informe o CEP de seu endereço",LINE_NOT_FOUND:"Não foi possível carregar os produtos da categoria.",LINES_NOT_FOUND:"Não foi possível carregar as linhas de produtos.",ADDRESS_LIST_ERROR:"Não foi possível carregar a sua lista de endereços.",SHIPPING_ERROR:"Não foi possível calcular o frete.",INSUFFICIENT_STOCK:"Esse produto está indisponível no estoque.",SEND_EMAIL_BOLETO:"Não foi possível enviar o e-mail com as informações do boleto.",ZIPCODE_NOT_FOUND:"Número de CEP não encontrado.",ZIPCODE_OUT_OF_RANGE:"O CEP informado não existe ou possui erro. Verifique e tente novamente.",NO_USER_FOUND:"Não existe usuário com o e-mail informado.",NO_ORDERS:"Você não tem pedidos abertos.",NO_ORDERS_HISTORY:"Você não tem pedidos antigos.",UNREGISTERED_USER:"O usuário não existe no Rede Natura.",TERMS_ERROR:"Não foi possível recuperar os termos de uso. Tente novamente mais tarde.",PARTNER_ERROR:"Não foi possível buscar o parceiro. Tente novamente mais tarde.",PRODUCT_PARTNER_ERROR:"Não foi possível importar os produtos do parceiro. Tente novamente mais tarde.",INVALID_CONSULTANT:"Desculpe, não foi possível obter este consultor. Por favor, verifique e tente novamente.",LOGIN_ERROR:"Não foi possível realizar o login no momento.<br>Tente novamente mais tarde.",REGISTER_ERROR:"Não foi possível realizar o seu cadastro no momento.<br>Tente novamente mais tarde.",LOGOUT_ERROR:"Não foi possível realizar o logout no momento.<br>Tente novamente mais tarde.",SUGGEST_CN_ERROR:"Não foi possível exibir o consultor recomendado.<br>Busque por um ou tente novamente mais tarde.",NOTIFY_ERROR:"Não foi possível cadastrar o seu e-mail para ser avisado.<br>Tente novamente mais tarde.",SEARCH_ERROR:"Não foi possível realizar a busca no momento.<br>Tente novamente mais tarde.",QUANTITY_BAG_ERROR:"Não foi possível alterar a quantidade do produto no momento.<br>Tente novamente mais tarde.",ADD_BAG_ERROR:"Erro ao adicionar o produto na sacola. Tente novamente mais tarde.",REMOVE_ITEM_BAG:"Não foi possível remover esse item no momento.<br>Tente novamente mais tarde.",EDIT_ADDRESS_ERROR:"Não foi possível atualizar o endereço no momento.<br>Tente novamente mais tarde.",NEW_ADDRESS_ERROR:"Não foi possível cadastrar o endereço no momento.<br>Tente novamente mais tarde.",REMOVE_ADDRESS_ERROR:"Não foi possível remover o endereço no momento.<br>Tente novamente mais tarde.",CEP_ERROR:"Não foi possível realizar a busca do CEP.<br>Preencha manualmente os campos obrigatórios.",CHECKOUT_NOT_AVAILABLE:"Não foi possível concluir a compra no momento.<br>Tente novamente mais tarde.",ERROR_404:"Não foi possível concluir a compra no momento.<br>Tente novamente mais tarde.",RATING_CN_ERROR:"Não foi possível avaliar o consultor no momento.<br>Tente novamente mais tarde.",GENERIC_SPACE_ERROR:"Não foi possível acessar o espaço genérico no momento.<br>Tente novamente mais tarde.",RETRIEVE_BAG_ERROR:"Não foi possível recuperar sua sacola.<br>Tente novamente mais tarde.",IDENTITY_ERROR:"Não foi possível cadastrar os seus dados no momento.<br>Tente novamente mais tarde.",PRODUCT_DETAIL_ERROR:"Não foi possível carregar os detalhes do produto.<br>Tente novamente mais tarde.",WELFARELOUNGE_ERROR:"Não foi possível carregar a sala de bem-estar.<br>Tente novamente mais tarde.",COUPON_ADD_ERROR:"Não foi possível aplicar o cupom no momento.<br>Tente novamente mais tarde.",COUPON_REMOVE_ERROR:"Não foi possível remover o cupom no momento.<br>Tente novamente mais tarde.",CONSULTANT_ERROR:"Não foi possível acessar o espaço do consultor no momento.<br>Tente novamente mais tarde.",FORGET_PASSWORD_ERROR:"Não foi possível recuperar a senha no momento.<br>Tente novamente mais tarde.",MY_ORDERS_ERROR:"Não foi possível exibir os seus pedidos no momento.<br>Tente novamente mais tarde.",MY_ORDERS_HISTORY_ERROR:"Não foi possível exibir os seus pedidos antigos no momento.<br>Tente novamente mais tarde.",GIFT_MESSAGE_ERROR:"Não foi possível salvar a mensagem do presente.<br>Tente novamente mais tarde.",CHANGE_PASSWORD_ERROR:"Não foi possível alterar a senha no momento.<br>Tente novamente mais tarde.",FACEBOOK_LOGIN_ERROR:"Não foi possível recuperar as informações do Facebook no momento.<br>Tente novamente mais tarde.",EXTERNAL_BAG_ERROR:"Não foi possível adicionar a sacola externa no momento.<br>Tente novamente mais tarde.",MULTIPLE_GIFTS_IN_CART:"Para escolher um outro produto, o primeiro deverá ser excluído da sacola!",ADDRESS_ERROR:"Não foi possível selecionar o endereço. Tente novamente mais tarde.",ERROR_COMMITING_ORDER:"Houve um erro ao enviar o pedido."})}(),function(){function a(a,b,c,d,e){function f(){var a=c.getBag();if(a&&a.commerceItems&&a.commerceItems.length>0){if(g(a))return!1;var b=i();switch(b){case"home":case"sacola":case"produto-detalhe":case"produtos":case"busca":case"saladebemestar":case"destaquemodacasa":case"linhas":return!0;default:return!1}}}function g(a){var b=_.every(a.commerceItems,"quantity",0);return b}function h(a){var b=_.last(a).split("-");return b=_.last(b),b=_.parseInt(b),b=!_.isNaN(b),b&&!_.includes(a,t.NOSSOS_PRODUTOS)?!0:!1}function i(){if(-1!==a.path().indexOf("pid")){var b=a.path().replace("pid","");a.path(b)}var c=a.path(),d=c.split("/");if(h(d))return"produto-detalhe";if(_.includes(d,t.NOSSOS_PRODUTOS))return"produtos";if(_.includes(d,t.BUSCA))return"busca";if(_.includes(d,t.PAGAMENTO))return"pagamento";switch(d[1]){case"":return"home";case"saladebemestar":return"saladebemestar";case"lines":return"linhas";case"address":return"endereco";case"finalizacao":return"finalizacao";case"destaquemodacasa":return"destaquemodacasa";case"espaco":return j(d);case"cn":return k(d);case"minha-sacola":return"sacola";case"bag":return"sacola"}}function j(a){return 2===a.length?"home":""===a[2]&&3===a.length?"home":a.length>=3&&a[2]===t.BAG?"sacola":a.length>=3&&a[2]===t.MINHA_SACOLA?"sacola":a[3]===t.MINHA_SACOLA?"sacola":a[3]===t.BAG?"sacola":a[2]===t.MINHA_SACOLA?"sacola":a[2]!==t.NOSSOS_PRODUTOS?"home":void 0}function k(a){return 2===a.length?"home":""===a[2]&&3===a.length?"home":a[2]!==t.NOSSOS_PRODUTOS?"home":void 0}function l(){var a=d.getUser(),e=c.getBag(),f=i();if(e.commerceItems)switch(f){case"home":b.mappingHome(a);break;case"sacola":b.mappingBag(a,e);break;case"endereco":b.mappingCheckout(a);break;case"pagamento":b.mappingCheckout(a);break;default:return}}function m(){var b={remove:!1,set:!1,consultantToSet:null,url:""},c=e.getConsultant(),d=i(),f=a.path();switch(f=f.split("/"),d){case"home":b=n(c,f,b);break;case"produtos":b=o(c,f,b);break;case"produto-detalhe":b=q(c,f,b);break;case"sacola":b=p(c,f,b)}if(null!==b.consultantToSet){var g=b.consultantToSet;b.consultantToSet={cnSpaceId:g}}return b}function n(a,b,c){return a&&a.cnUserName?2===b.length&&b[1]===t.ESPACO?(c.remove=!0,c.consultantToSet=a.cnUserName):3===b.length&&b[1]===t.ESPACO&&""===b[2]?c.url="/"+t.ESPACO:3===b.length&&b[1]===t.CONSULTOR&&""===b[2]?c.url="/"+t.ESPACO:3===b.length&&b[2]!==a.cnUserName?(c.remove=!0,c.consultantToSet=b[2]):2===b.length&&""===b[1]&&(c.url="/"+t.ESPACO+"/"+a.cnUserName):3===b.length&&""!==b[2]&&(c.set=!0,c.consultantToSet=b[2]),c}function o(a,b,c){return a&&a.cnUserName?b.length>=4&&b[2]===t.NOSSOS_PRODUTOS?(b.splice(2,0,a.cnUserName),c.url=b.join("/")):b.length>4&&b[2]!==a.cnUserName&&(c.remove=!0,c.consultantToSet=b[2]):b.length>4&&b[2]!==t.NOSSOS_PRODUTOS&&(c.set=!0,c.consultantToSet=b[2]),c}function p(a,b,c){return b[2]===t.BAG||b[2]===t.MINHA_SACOLA?c:(a&&a.cnUserName?b.length>=3&&b[1]===t.ESPACO&&b[2]!==a.cnUserName&&(c.remove=!0,c.consultantToSet=b[2]):b.length>=3&&b[1]===t.ESPACO&&(c.set=!0,c.consultantToSet=b[2]),c)}function q(a,b,c){return a&&a.cnUserName?3===b.length?(b.splice(2,0,a.cnUserName),c.url=b.join("/")):4===b.length&&b[2]!==a.cnUserName&&(c.remove=!0,c.consultantToSet=b[2]):4===b.length&&(c.set=!0,c.consultantToSet=b[2]),c}function r(){var a=i(),b=["endereco","pagamento","finalizacao"];return _.includes(b,a)}function s(){var b=a.search();b.consultant&&(delete b.consultant,a.search(b))}var t={ESPACO:"espaco",NOSSOS_PRODUTOS:"nossos-produtos",BAG:"bag",MINHA_SACOLA:"minha-sacola",BUSCA:"search",CONSULTOR:"cn",PAGAMENTO:"buy"},u={shouldShowBag:f,getView:i,callChaordic:l,isCheckoutPage:r,processConsultantUrl:m,clearUrlParameters:s};return u}angular.module("copycatNaturaEcommerceWebApp").factory("UrlService",["$location","ChaordicService","BagService","UserService","ConsultantService",a])}(),function(){function a(a){function b(){return i++,!0}function c(){return i--,0===i}function d(){function b(a){var b=a.data,c={imageUrl:"images/bemestar.jpg",obsText:"",url:"/saladebemestar",lightbox:""};b.footer.unshift(c);for(var d=0;d<b.footer.length;d++)(-1!=b.footer[d].url.indexOf("movimentonatura")||-1!=b.footer[d].url.indexOf("cadastro"))&&(b.footer[d].target="_blank"),-1===b.footer[d].url.indexOf("saladebemestar")&&(-1===b.footer[d].imageUrl.indexOf("http")||-1===b.footer[d].imageUrl.indexOf("https"))&&(b.footer[d].imageUrl="http:"+b.footer[d].imageUrl),b.footer[d].url.indexOf("javascript")>-1&&(delete b.footer[d].url,b.footer[d].lightbox="modal");return b}return a.get("/api/homeData").then(b)}function e(){return j}function f(a){j=a}function g(){return k}function h(a){k=a}var i=0,j=!1,k=null,l={loading:b,hasToStopLoading:c,loadContentHome:d,getHasToChangeCN:e,setHasToChangeCN:f,getActionSoftLogin:g,setActionSoftLogin:h};return l}angular.module("copycatNaturaEcommerceWebApp").factory("VisualService",["$http",a])}(),function(){function a(a){function b(b){function c(a){var b=a.data;return b}return a.get(" /api/address/fastDelivery/"+b).then(c)}var c={calculateDelivery:b};return c}angular.module("copycatNaturaEcommerceWebApp").factory("DeliveryService",["$http",a])}(),function(){angular.module("app.directives").directive("formatField",function(){return{require:"ngModel",scope:{maxAccepted:"=",hasSpaces:"=",typeAccepted:"="},link:function(a,b,c,d){function e(b){if(void 0===b)return b;var c;return"all"===a.typeAccepted?c=b:a.hasSpaces?"letters"===a.typeAccepted?c=b.replace(/[^a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-\s]/g,"").replace(/\s+/g," "):"numbers"===a.typeAccepted?c=b.replace(/[^0-9\s]/g,""):"nosymbols"===a.typeAccepted&&(c=b.replace(/[^0-9a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð ,.'-\s]/g,"")):"letters"===a.typeAccepted?c=b.replace(/[^a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð,.'-]/g,""):"numbers"===a.typeAccepted?c=b.replace(/[^0-9]/g,""):"nosymbols"===a.typeAccepted&&(c=b.replace(/[^0-9a-zA-ZàáâäãåąčćęèéêëėįìíîïłńòóôöõøùúûüųūÿýżźñçčšžÀÁÂÄÃÅĄĆČĖĘÈÉÊËÌÍÎÏĮŁŃÒÓÔÖÕØÙÚÛÜŲŪŸÝŻŹÑßÇŒÆČŠŽ∂ð,.'-]/g,"")),a.maxAccepted&&c.length>a.maxAccepted&&(c=c.slice(0,-1)),c!==b&&(d.$setViewValue(c),d.$render()),c}d.$parsers.push(e)}}})}(),function(){angular.module("angular-carousel").directive("rnCarouselAutoSlide",["$interval",function(a){return{restrict:"A",link:function(b,c,d){var e=Math.round(1e3*parseFloat(d.rnCarouselAutoSlide));a(function(){b.indicatorIndex<b.carouselIndicatorArray.length-1?b.indicatorIndex++:b.indicatorIndex=0},e)}}}])}(),function(){angular.module("app.directives").directive("scroll",["$window",function(a){return function(b){angular.element(a).bind("scroll",function(){b.showTop=this.pageYOffset>=200?!0:!1,b.$apply()})}}])}(),function(){function a(){return function(a){if(a){var b=a.split(" "),c=b.map(function(a){return/^(da|de)$/.test(a.toLowerCase())?a.toLowerCase():a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()});return c.join(" ")}}}angular.module("app.filters").filter("name",a)}(),function(){function a(){return function(a){if(a){var b=a.replace(/\(/g,"").replace(/\)/g,"").replace(/\s/g,"");return b}}}angular.module("app.filters").filter("phoneOnlyNumbers",a)}(),function(){function a(){return function(a){if(a){var b=a.split("/");return"/"+b[b.length-1]}}}angular.module("app.filters").filter("userfacebook",a)}(),function(){function a(a,b){return{response:function(c){return b.dealWith(c)?c||a.when(c):a.reject(c)},responseError:function(c){return b.dealWithResponseError(c),a.reject(c)}}}angular.module("copycatNaturaEcommerceWebApp").factory("ErrorsInterceptor",["$q","ErrorService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){a.loadPageInformation(void 0,void 0),c.scroll(0,0),a.deliveryTypeNormal=!0,a.deliveryTypeSchedule=!1,a.selectedAddress={},a.hasValidZipcode=!1,a.showModalTerms=!1,k(),a.firstAddress=!1,a.showForm=!1,a.hasError={},a.hasNewAddress=!1,a.selectedDate={},a.selectedPeriod=0,a.selectedAddressToCheckout={},a.invalidZipCode=!1,S()}function k(){null===f.getTermsAccepted()&&f.setTermsAccepted(i.getUser().latestTermsAndConditionsAccepted),f.getTermsAccepted()?l():P()}function l(){f.setTermsAccepted("REMOVE"),a.setLoading(g.loading()),f.loadAddresses().then(function(b){"SUCCESS"===b.status?(a.addresses=b.result,a.addresses.length>0?O():(a.firstAddress=!0,a.openForm("new"))):(a.notificationErrorMessage(e.ADDRESS_LIST_ERROR),d.path("/bag")),a.setLoading(!g.hasToStopLoading())})}function m(b){a.setLoading(g.loading()),f.calculateShipment(b).then(function(b){if("SUCCESS"===b.status)a.invalidZipCode=!1,a.shipment=b.result,a.deliveryTime=a.shipment.normalDeliveryTime,a.shipmentValue=a.shipment.normalShippingPrice,a.bagValue=a.bag.orderSubtotal,a.totalValue="R$ "+a.formatToReal(a.removeMoneySigns(a.shipmentValue)+a.removeMoneySigns(a.bagValue)),a.date=b.result.normalDeliveryDate,D(),a.bag.shipping=a.shipmentValue,a.bag.orderTotal=a.totalValue,a.setBag(a.bag);
else if("USER_ERROR"===b.status){if("INVALID_ZIPCODE"===b.userErrorKey){a.invalidZipCode=!0;var c;c=0===Object.keys(a.selectedAddressToCheckout).length?a.addresses[0]:a.selectedAddressToCheckout,t(c)}}else a.notificationErrorMessage(e.SHIPPING_ERROR),d.path("/bag");a.setLoading(!g.hasToStopLoading())})}function n(b){f.setSelectedAddress(b),a.selectedAddressToCheckout=b,a.selectDeliveryType("NORMAL"),m(b.zipCode)}function o(b){"NORMAL"===b?(a.setDeliveryTypeNormal(!0),a.setDeliveryTypeSchedule(!1),a.selectedDate={},a.selectedPeriod=0,a.periodTypeMorning=!1,a.periodTypeAfternoon=!1):(a.setDeliveryTypeNormal(!1),a.setDeliveryTypeSchedule(!0))}function p(b){a.deliveryTypeNormal=b}function q(b){a.deliveryTypeSchedule=b}function r(b){a.selectedDate=b,a.date=b.date}function s(b){"MORNING"===b?(a.selectedPeriod=1,a.periodTypeMorning=!0,a.periodTypeAfternoon=!1):(a.selectedPeriod=2,a.periodTypeMorning=!1,a.periodTypeAfternoon=!0)}function t(b){a.openForm("edit",b)}function u(b,d){c.scrollTo(0,0),a.setShowForm(!0),"edit"===b?(a.titleToShow="Altere aqui o endereço da entrega:",a.actionSaveForm="edit",E(d),G(d.phone)):"new"===b&&(a.titleToShow="Cadastre aqui o endereço da entrega:",a.actionSaveForm="new",a.selectedAddress.fullName=a.userLogged.name+" "+a.userLogged.surname,G(a.userLogged.homePhone))}function v(b){a.actualAddressToRemove=b,a.setShowModalRemove(!0)}function w(b){b&&(a.setLoading(g.loading()),f.deleteAddress(b).then(function(b){b&&"SUCCESS"===b.status?(a.actualAddressToRemove=-1,a.setShowModalRemove(!1),c.scrollTo(0,0),l()):a.notificationErrorMessage(e.REMOVE_ADDRESS_ERROR),a.setLoading(!g.hasToStopLoading())}))}function x(b){a.showForm=b,b||(a.selectedAddress={},c.scrollTo(0,0))}function y(){B()&&("new"===a.actionSaveForm?A():"edit"===a.actionSaveForm&&z())}function z(){var b=H();a.setLoading(g.loading()),f.updateAddress(b).then(function(b){"SUCCESS"===b.status?(a.setShowForm(!1),a.selectedAddress={},l()):a.notificationErrorMessage("USER_ERROR"===b.status?b.userErrorKey:e.EDIT_ADDRESS_ERROR),a.setLoading(!g.hasToStopLoading())})}function A(){var b=H();a.setLoading(g.loading()),f.newAddress(b).then(function(b){"SUCCESS"===b.status?(a.setShowForm(!1),a.selectedAddress={},a.hasNewAddress=!0,a.firstAddress=!1,l()):a.notificationErrorMessage("USER_ERROR"===b.status?"APO_CITY"===b.userErrorKey?e.APO_CITY:b.userErrorKey:e.NEW_ADDRESS_ERROR),a.setLoading(!g.hasToStopLoading())})}function B(){return a.hasError={},a.selectedAddress.addressZipCode&&0!==a.selectedAddress.addressZipCode.length?8!==a.selectedAddress.addressZipCode.length?(a.notificationErrorMessage("O CEP informado é inválido."),a.hasError.cep=!0,!1):a.hasValidZipcode?a.selectedAddress.address?a.selectedAddress.addressNumber?a.selectedAddress.addressNeighborhood?a.selectedAddress.addressCity?a.selectedAddress.addressState?a.selectedAddress.fullName?a.selectedAddress.dddphone?2!==a.selectedAddress.dddphone.length?(a.notificationErrorMessage("O ddd informado é inválido."),a.hasError.receberDdd=!0,!1):a.selectedAddress.phone?a.selectedAddress.phone.length<8?(a.notificationErrorMessage("O telefone informado é inválido."),a.hasError.receberTelefone=!0,!1):!0:(a.notificationErrorMessage("Obrigatório informar o telefone de quem irá receber o(s) produto(s)."),a.hasError.receberTelefone=!0,!1):(a.notificationErrorMessage("Obrigatório informar o ddd do telefone de quem irá receber o(s) produto(s)."),a.hasError.receberDdd=!0,!1):(a.notificationErrorMessage("Obrigatório informar o nome de quem irá receber o(s) produto(s)."),a.hasError.receberNome=!0,!1):(a.notificationErrorMessage("Obrigatório informar o estado."),a.hasError.estado=!0,!1):(a.notificationErrorMessage("Obrigatório informar a cidade."),a.hasError.cidade=!0,!1):(a.notificationErrorMessage("Obrigatório informar o bairro."),a.hasError.bairro=!0,!1):(a.notificationErrorMessage("Obrigatório informar o número do endereço."),a.hasError.numero=!0,!1):(a.notificationErrorMessage("Obrigatório informar o endereço."),a.hasError.endereco=!0,!1):(c.scroll(0,0),a.notificationErrorMessage("O CEP informado é inválido."),a.hasError.cep=!0,!1):(a.notificationErrorMessage("Obrigatório informar o CEP."),a.hasError.cep=!0,!1)}function C(b){a.setLoading(g.loading()),f.getAddressByZipCode(b).then(function(b){"SUCCESS"===b.status?(a.invalidZipCode=!1,a.selectedAddress.address=b.result.address,a.selectedAddress.addressComplement=b.result.complement,a.selectedAddress.addressNeighborhood=b.result.district,a.selectedAddress.addressCity=b.result.city,a.selectedAddress.addressState=b.result.state,a.hasValidZipcode=!0):"USER_ERROR"===b.status?("ZIPCODE_OUT_OF_RANGE"===b.userErrorKey?a.notificationErrorMessage(e.ZIPCODE_OUT_OF_RANGE):"INVALID_ZIPCODE"===b.userErrorKey&&(a.selectedAddress.addressZipCode="",a.notificationErrorMessage(e.INVALID_ZIPCODE)),a.hasValidZipcode=!1,c.scroll(0,0)):(a.notificationErrorMessage(e.CEP_ERROR),a.hasValidZipcode=!1,c.scroll(0,0)),a.setLoading(!g.hasToStopLoading())})}function D(){a.shipment.availableDays.sort(function(a,b){var c=a.date.split("/"),d=b.date.split("/"),e=new Date(c[2],c[1],c[0]),f=new Date(d[2],d[1],d[0]);return e-f})}function E(b){a.selectedAddress.addressKey=b.key,a.selectedAddress.addressType=b.type,a.selectedAddress.address=b.street,a.selectedAddress.addressNumber=b.number,a.selectedAddress.addressComplement=b.adjunct,a.selectedAddress.addressNeighborhood=b.neighborhood,a.selectedAddress.addressZipCode=b.zipCode,a.selectedAddress.addressCity=b.city,a.selectedAddress.addressState=b.state,a.selectedAddress.addressRef=b.referencia,a.selectedAddress.fullName=b.name}function F(a){var b=a.split(" "),c=b[0];b.shift();var d=b.join(" ");return{first:c,last:d}}function G(b){a.selectedAddress.dddphone=b.substring(0,2),a.selectedAddress.phone=b.substring(2)}function H(){var b=angular.copy(a.selectedAddress);b.phoneNumber=b.dddphone+b.phone,b.phoneType="residencial";var c=F(b.fullName);b.firstName=c.first,b.lastName=c.last;var d={address:b};return d}function I(b){a.showModalRemove=b}function J(){a.deliveryTypeSchedule?a.isEmpty(a.selectedDate)?a.notificationErrorMessage("Escolha uma data para a entrega."):0!==a.selectedPeriod?K():a.notificationErrorMessage("Escolha um período para a entrega."):K()}function K(){var b=N();a.setLoading(g.loading()),f.putAddress(b).then(function(b){if("SUCCESS"===b.status)f.isPartnerGiftPurchase()?(a.setBag(b.result),d.path("/finalizacao")):b.result.commerceItems.length>0?(a.setBag(b.result),d.path("/buy")):(a.notificationErrorMessage(e.CHECKOUT_NOT_AVAILABLE),d.path("/"));else if("USER_ERROR"===b.status)if("INSUFFICIENT_STOCK"===b.userErrorKey)a.setBag(b.result),M(b.result.commerceItems);else if("INVALID_ZIPCODE"===b.userErrorKey){a.invalidZipCode=!0;var c;c=0===Object.keys(a.selectedAddressToCheckout).length?a.addresses[0]:a.selectedAddressToCheckout,t(c)}else if("ERROR_COMMITING_ORDER"===b.userErrorKey)a.notificationErrorMessage(e.ERROR_COMMITING_ORDER);else if("GIFT_OUT_OF_STOCK"===b.userErrorKey){h.loadBag();var i=h.getBag().commerceItems[0].promotionRedirectUrl;L(h.getBag().commerceItems[0]),h.clearBag(),a.notificationErrorMessageTimer(e.GIFT_OUT_OF_STOCK,6e3),d.path(i)}else a.notificationErrorMessage(b.userErrorKey);else a.notificationErrorMessage(e.ADDRESS_ERROR),d.path("/bag");a.setLoading(!g.hasToStopLoading())})}function L(b){a.setLoading(g.loading()),h.removeBag(b.skuId).then(function(b){"SUCCESS"===b.status?(a.setBag(b.result),a.$broadcast("BagChanged"),a.shouldShowBag()):a.notificationErrorMessage(b&&"USER_ERROR"===b.status?b.userErrorKey:e.REMOVE_ITEM_BAG),a.setShowModalRemove(!1),a.setLoading(!g.hasToStopLoading())})}function M(a){for(var b=!1,c=0;c<a.length;c++)if(0===a[c].quantity)return b=!0,void d.path("/bag");b||d.path("/buy")}function N(){var b=F(a.selectedAddressToCheckout.name),c={shipment:{firstName:b.first,lastName:b.last,addressKey:a.selectedAddressToCheckout.key,shippingType:a.deliveryTypeNormal?"NORMAL":"SCHEDULED",deliveryPeriod:a.selectedPeriod,deliveryDate:a.date,addressZipCode:a.selectedAddressToCheckout.zipCode}};return c}function O(){var b=a.hasNewAddress?a.addresses.length-1:0;a.addresses[b].open=!0,f.setSelectedAddress(a.addresses[b]),a.selectedAddressToCheckout=a.addresses[b],m(a.addresses[b].zipCode),a.hasNewAddress=!1}function P(){f.loadTerms().then(function(b){b&&"SUCCESS"===b.status?(a.termsData=b.result.terms,a.showModalTerms=!0):a.notificationErrorMessage(e.TERMS_ERROR)})}function Q(){d.path("/")}function R(){a.showModalTerms=!1,l()}function S(){var b=h.getBag();1===b.commerceItems.length&&b.commerceItems[0].isPartnerGift===!0?(f.setPartnerGiftPurchase(!0),a.isPartnerGift=!0):(f.setPartnerGiftPurchase(!1),a.isPartnerGift=!1)}return a.onSelectAddress=n,a.selectDeliveryType=o,a.setDeliveryTypeNormal=p,a.setDeliveryTypeSchedule=q,a.onDateSelected=r,a.onSelectPeriod=s,a.editAddress=t,a.openForm=u,a.checkAddressToRemove=v,a.removeAddress=w,a.setShowForm=x,a.saveAddress=y,a.setShowModalRemove=I,a.verifyCheckoutAddress=J,a.refuseAndGoBack=Q,a.acceptTerms=R,a.$on("BagChanged",function(){j()}),a.$watch("selectedAddress.addressZipCode",function(a,b){b&&a&&8===a.length&&C(a)}),a.hasPermissionToCheckout()?void j():void d.path("/")}angular.module("copycatNaturaEcommerceWebApp").controller("AddressCtrl",["$scope","$http","$window","$location","UserErrorService","AddressService","VisualService","BagService","UserService",a])}(),function(){function a(a,b,c){function d(){b.scrollTo(0,0),a.boxesBemEstar=[],e()}function e(){c.getAgendaDetail().then(function(b){for(var c=0;c<b.length;c++)b[c].imageUrl="http:"+b[c].imageUrl;a.detail=b})}a.init=d,a.loadDetail=e,a.init()}angular.module("copycatNaturaEcommerceWebApp").controller("AgendaCtrl",["$scope","$window","BemEstarService",a])}(),function(){function a(a,b,c,d,e,f){function g(){a.setCanonical("http://rede.natura.net/espaco/minha-sacola"),a.loadPageInformation(void 0,void 0),b.scroll(0,0),a.actualProductToRemove={},a.showModalRemove=!1,a.bag.commerceItems?m():r(),a.charLeft=900,a.showModalGift=!1,l()}function h(b,c){b.quantity>b.minAllowed&&"reduce"===c?a.addProductInBag(b,b.quantity-1):b.quantity<b.maxAllowed&&"more"===c?a.addProductInBag(b,b.quantity+1):b.quantity===b.minAllowed&&"reduce"===c&&a.checkItemBagToRemove(b)}function i(b){b.formattedDiscountAmount&&"R$ 0,00"===b.formattedDiscountAmount||"PID00001"===b.productId?(a.actualProductToRemove={},a.setShowModalRemove(!1),j(b)):(a.actualProductToRemove=b,a.setShowModalRemove(!0))}function j(b){a.setLoading(e.loading()),f.removeBag(b.skuId).then(function(c){"SUCCESS"===c.status?(a.setBag(c.result),"PID00001"===b.productId&&r(),a.$broadcast("BagChanged"),a.shouldShowBag()):a.notificationErrorMessage(c&&"USER_ERROR"===c.status?c.userErrorKey:d.REMOVE_ITEM_BAG),a.setShowModalRemove(!1),a.setLoading(!e.hasToStopLoading())})}function k(b){a.showModalRemove=b}function l(){var b=a.bag.orderSubtotal,c=a.bag.orderDiscount;if(b&&c){var d=a.removeMoneySigns(b),e=a.removeMoneySigns(c);a.orderTotal="R$ "+a.formatToReal(d-e)}}function m(){var b=a.indexOfGiftOnBag();a.giftToRemove=a.bag.commerceItems[b],a.checkGift=-1!==b}function n(){if(a.checkGift)a.showModalGift=!0;else{var b=a.indexOfGiftOnBag();-1!==b&&a.removeItemBag(a.giftToRemove)}}function o(b){a.showModalGift=b,b||(a.checkGift=!1)}function p(){var b=q();b&&(a.setLoading(e.loading()),f.addGift(b).then(function(b){"SUCCESS"===b.status?(a.setBag(b.result),a.giftNome=a.giftPessoa=a.giftMensagem="",m()):a.notificationErrorMessage(d.GIFT_MESSAGE_ERROR),a.setLoading(!e.hasToStopLoading())}))}function q(){if(a.giftNome)if(a.giftPessoa){if(a.giftMensagem){a.setShowModalGift(!1);var b={sender:a.giftNome,receiver:a.giftPessoa,message:a.giftMensagem};return b}a.notificationErrorMessage("Informe a mensagem.")}else a.notificationErrorMessage("Informe o nome de quem irá receber.");else a.notificationErrorMessage("Informe o seu nome.");return null}function r(){a.checkGift=!1,a.giftToRemove=null}a.controllerItemBag=h,a.removeItemBag=j,a.checkItemBagToRemove=i,a.setShowModalRemove=k,a.verifyGift=n,a.setShowModalGift=o,a.giftContinuar=p,a.$on("BagChanged",function(){l()}),a.$watch("giftMensagem",function(b){(b||""===b)&&(b.length<=900?a.charLeft=900-b.length:b=b.slice(0,900),a.giftMensagem=b)}),g()}angular.module("copycatNaturaEcommerceWebApp").controller("BagCtrl",["$scope","$window","$location","UserErrorService","VisualService","BagService",a])}(),function(){function a(a,b,c,d,e,f){function g(){a.setCanonical("http://rede.natura.net/saladebemestar"),c.scrollTo(0,0),a.boxesBemEstar=[],h()}function h(){a.setLoading(e.loading()),f.getBoxes().then(function(c){"SUCCESS"!==c.status||a.isEmpty(c.result)?(a.notificationErrorMessage(d.WELFARELOUNGE_ERROR),b.path("/")):a.boxesBemEstar=c.result,a.setLoading(!e.hasToStopLoading())})}a.loadBoxes=h,g()}angular.module("copycatNaturaEcommerceWebApp").controller("BemEstarCtrl",["$scope","$location","$window","UserErrorService","VisualService","BemEstarService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){b.scrollTo(0,0),a.detail={},a.products=[],a.totalProducts=0,a.setCanonical("http://rede.natura.net/saladebemestar/"+h.news),a.actualProductToSend="",a.showModalSend=!1,a.showModalSuccessNotify=!1,a.currentURL=""+e.absUrl().toString(),j()}function j(){d.getDetail().then(function(b){if(a.detail=b,q(a.detail.subtitle),a.shareWhatsapp=t(a.detail.subtitle),b.products){a.totalProducts=b.products.length;for(var c=0;c<b.products.length;c++)k(b.products[c])}})}function k(b){d.getProduct(b).then(function(b){b.status?a.totalProducts--:(b.actualIndex=0,v.push(b),v.length===a.totalProducts&&(a.products=v))})}function l(a,b){a.actualIndex=b}function m(b){a.actualProductToSend=b}function n(b){a.showModalSend=b,b||(a.showModalSuccessNotify=!1,a.request={})}function o(b){a.showModalSuccessNotify=b}function p(b){a.setActualProductToSend(b.sku),a.setShowModalSend(!0)}function q(b){var c=r(b),d=s(b),e="Sala, Bem-Estar, Bem Estar, Sala de Bem-Estar, Natura, Rede, Rede Natura";a.loadPageInformation(a.detail.image,d,e);var f={type:"image",src:a.detail.image,href:a.currentURL},g=new window.gigya.socialize.UserAction;g.setLinkBack(a.currentURL),g.setTitle(c),g.setDescription(d),g.addMediaItem(f);var h={userAction:g,shareButtons:[{provider:"facebook-share",tooltip:"Compartilhar no Facebook",facebookDialogType:"share"}],containerID:"divButtons"};window.gigya.socialize.showShareBarUI(h)}function r(a){if(a){var b=a.split("<h1>"),c=b[1].split("</h1>");return c[0]}}function s(a){if(a){var b=a.split("<h2>"),c=b[1].split("</h2>");return c[0]}}function t(b){var c=s(b),d=f.trustAsHtml('<div class="whatsapp-3"><div class="whatsapp-image"></div> <a href="whatsapp://send?text='+c+" - "+a.currentURL+'" data-action="share/whatsapp/share"><span class="whatsapp-label">Compartilhar</span></a></div>');return d}function u(){g.shareFbCallback()}a.loadDetail=j,a.loadProduct=k,a.setSliderIndex=l,a.setActualProductToSend=m,a.setShowModalSend=n,a.showModalNotifyUser=p,a.setShowModalSuccessNotify=o,a.sendFbCallBack=u;var v=[];i()}angular.module("copycatNaturaEcommerceWebApp").controller("BemEstarDetalheCtrl",["$scope","$window","$filter","BemEstarService","$location","$sce","GoogleTagManagerService","$routeParams",a])}(),function(){function a(a,b,c,d,e,f,g,h,i,j){function k(){c.scrollTo(0,0),a.hasErrorOnApplyCoupon=!1,a.tabs=[{header:"Cartão de crédito",ativo:!0},{header:"Boleto bancário",ativo:!1}],a.orderBag=f.hasSupport()?f.get("bag"):h.getBag(),a.coupon={val:""},a.showModalHasCoupon=!1,B(),a.showModalMultiplus=!1,a.mensagemMultiplus="",a.payment={},a.hasError={},p(),a.creditCardTypes=[{label:"Mastercard",value:"MASTERCARD",image:"master.png"},{label:"Visa",value:"VISA",image:"visa.png"},{label:"American Express",value:"AMERICAN_EXPRESS",image:"amex.png"},{label:"Diners",value:"DINERS",image:"diners.png"},{label:"Hipercard",value:"HIPERCARD",image:"hipercard.png"},{label:"Elo",value:"ELO",image:"elo.png"}],t(),z(),l()}function l(){var b="Caso tenha um cupom de desconto, digite no campo acima e clique no botão ok. Será aplicado apenas 1 cupom por compra. *Exceto para produtos Natura+, Crer Pra Ver, embalagem para presente e frete";a.bagMessage=f.get("bag"),a.bagMessage=a.bagMessage.couponMessage||b,a.trustedHtml=d.trustAsHtml(a.bagMessage)}function m(b){return""===b?void a.notificationErrorMessage("Informe o nome do cupom."):(a.setLoading(e.loading()),void h.useCoupon(b).then(function(b){"SUCCESS"===b.status?(a.setBag(b.result.cart.response),a.orderBag=b.result.cart.response,a.orderBag.couponDiscount=b.result.couponDiscount,a.coupon.val="",b.result.modal&&(a.setShowModalMultiplus(!0),a.mensagemMultiplus=b.result.modal),p()):"USER_ERROR"===b.status?"INVALID_COUPON"===b.userErrorKey?(a.notificationErrorMessage(g.INVALID_COUPON),a.hasErrorOnApplyCoupon=!0):"INELIGIBLE_COUPON"===b.userErrorKey&&(a.notificationErrorMessage(g.INELIGIBLE_COUPON),a.hasErrorOnApplyCoupon=!0,n()):a.notificationErrorMessage(g.COUPON_ADD_ERROR),a.setLoading(!e.hasToStopLoading())}))}function n(){a.setLoading(e.loading()),h.removeCoupon().then(function(b){"SUCCESS"===b.status?(a.setBag(b.result.cart.response),a.orderBag=b.result.cart.response,a.coupon.val="",a.setShowModalHasCoupon(!1),a.hasErrorOnApplyCoupon||z(),p()):"USER_ERROR"===b.status||a.notificationErrorMessage(g.COUPON_REMOVE_ERROR),a.setLoading(!e.hasToStopLoading())})}function o(b){a.showModalHasCoupon=b}function p(){var b=a.bag.installments;b[0]="à vista: 1x de "+b[0]+" (sem juros)";for(var c=1;c<b.length;c++)b[c]=c+1+"x de "+b[c]+" (sem juros)";a.installments=b,a.payment.numInstallments=a.installments[0]}function q(b){a.tabs[0].ativo=0===b?!0:!1,a.tabs[1].ativo=1===b?!0:!1,a.hasError={}}function r(b){s(b)&&x(a.payment)}function s(b){if(a.hasError={},"cartao"===b){if(!a.payment.creditCardType)return a.notificationErrorMessage("Selecione a bandeira do cartão de crédito."),!1;if(!a.payment.cpf)return a.notificationErrorMessage("Informe o CPF."),a.hasError.cpf=!0,!1;if(!u(a.payment.cpf.toString()))return a.notificationErrorMessage("O CPF informado não é válido."),a.hasError.cpf=!0,!1;if(!a.payment.name)return a.notificationErrorMessage("Informe o nome impresso no cartão de crédito."),a.hasError.name=!0,!1;if(!a.payment.creditCardNumber)return a.notificationErrorMessage("Informe o número do cartão."),a.hasError.number=!0,!1;if(!v())return a.notificationErrorMessage("O número do cartão informado não é válido."),a.hasError.number=!0,!1;if(!a.payment.creditCardExpirationMonth)return a.notificationErrorMessage("Selecione o mês de vencimento do cartão."),a.hasError.month=!0,!1;if(!a.payment.creditCardExpirationYear)return a.notificationErrorMessage("Selecione o ano de vencimento do cartão."),a.hasError.year=!0,!1;if(!a.payment.creditCardVerificationCode)return a.notificationErrorMessage("Informe o código de verificação do cartão."),a.hasError.code=!0,!1;if(!w())return a.notificationErrorMessage("O código de segurança do cartão não é válido."),a.hasError.code=!0,!1;if(!a.payment.numInstallments)return a.notificationErrorMessage("Escolha o número de parcelas."),a.hasError.installment=!0,!1;a.payment.paymentType="creditCard"}else a.payment={},a.payment.paymentType="boleto";return!0}function t(){for(var b=[],c=new Date,d=c.getFullYear(),e=d+10,f=d;e>=f;f++)b.push({name:f,year:f});a.years=b}function u(a){if(a=(a||"").replace(/\D/g,""),11!==a.length||"00000000000"===a||"11111111111"===a||"22222222222"===a||"33333333333"===a||"44444444444"===a||"55555555555"===a||"66666666666"===a||"77777777777"===a||"88888888888"===a||"99999999999"===a)return!1;for(var b=0,c=0;9>c;c++)b+=parseInt(a.charAt(c))*(10-c);var d=11-b%11;if((10===d||11===d)&&(d=0),d!==parseInt(a.charAt(9)))return!1;for(b=0,c=0;10>c;c++)b+=parseInt(a.charAt(c))*(11-c);return d=11-b%11,(10===d||11===d)&&(d=0),d!==parseInt(a.charAt(10))?!1:!0}function v(){var b=a.payment.creditCardNumber.toString();return"AMERICAN_EXPRESS"===a.payment.creditCardType?15===b.length:"HIPERCARD"===a.payment.creditCardType?19===b.length||16===b.length:"DINERS"===a.payment.creditCardType?14===b.length:16===b.length}function w(){var b=a.payment.creditCardVerificationCode.toString();return"AMERICAN_EXPRESS"===a.payment.creditCardType?4===b.length:3===b.length}function x(d){var h=y(d);a.setLoading(e.loading());var k=j.getConsultant();k&&""!==k.cnUserName?(h.cnSpaceId=k.cnUserName,i.buy(h).then(function(d){"SUCCESS"===d.status?(i.setFirstBuy(),b.path("/finalizacao")):"USER_ERROR"===d.status?("ERROR_404"===d.userErrorKey?a.notificationErrorMessage(g.ERROR_404):"INVALID_CARD"===d.userErrorKey?a.notificationErrorMessage(g.INVALID_CARD):"INSUFFICIENT_STOCK"===d.userErrorKey?a.notificationErrorMessage(g.INSUFFICIENT_STOCK):"NO_CN_SELECTED"===d.userErrorKey&&a.notificationErrorMessage(g.NO_CN_SELECTED),"INVALID_CARD"!==d.userErrorKey&&"INSUFFICIENT_STOCK"!==d.userErrorKey&&(c.scrollTo(0,0),b.path("/"))):(a.notificationErrorMessage(g.CHECKOUT_NOT_AVAILABLE),b.path("/"));var h=f.get("coupon");h&&f.remove("coupon");var j=b.search();j.promocode&&(delete j.promocode,b.search(j)),a.setLoading(!e.hasToStopLoading())})):(a.notificationErrorMessage(g.CHECKOUT_NOT_AVAILABLE),a.setLoading(!e.hasToStopLoading()),c.scrollTo(0,0),b.path("/"))}function y(b){var c=angular.copy(b);if("creditCard"===b.paymentType){var d=(c.name||"").trim().split(" ");c.firstName=d[0].trim(),c.lastName=d.length?d.slice(1).join(" ").trim():"",delete c.name;for(var e=c.creditCardNumber.toString()||"",f=[],g=0;g<e.length;)f.push(e.substring(g,g+4)),g+=4;c.creditCardNumber=f.join(" "),c.creditCardExpirationYear=c.creditCardExpirationYear.year.toString(),c.creditCardVerificationCode=c.creditCardVerificationCode,c.numInstallments=a.bag.installments.indexOf(c.numInstallments)+1,c.birthDate=a.userLogged.dob;var h=a.userLogged.homePhone;h&&h.length>8&&(c.phoneNumber="("+h.substr(0,2)+")"+h.substr(2))}else delete c.numInstallments;return c}function z(){var b=f.get("coupon");b?(a.coupon.val=b,a.orderBag.coupon?a.setShowModalHasCoupon(!0):m(b)):(b=a.orderBag.coupon,b&&(a.coupon.val=b,m(b)))}function A(b){a.showModalMultiplus=b,b||(a.mensagemMultiplus="")}function B(){var b=a.indexOfGiftOnBag();a.purchaseIsGift=-1!==b?"SIM":"NÃO"}function C(){a.loadBag(),b.path("/bag")}return a.useCoupon=m,a.removeCoupon=n,a.setShowModalHasCoupon=o,a.redirectForBag=C,a.setTabContent=q,a.sendPayment=r,a.verifyCardNumberLength=v,a.verifyCardCodeLength=w,a.setShowModalMultiplus=A,a.hasPermissionToCheckout()?void k():void b.path("/")}angular.module("copycatNaturaEcommerceWebApp").controller("BuyCtrl",["$scope","$location","$window","$sce","VisualService","LocalStorageService","UserErrorService","BagService","BuyService","ConsultantService",a])}(),function(){function a(a,b,c,d){function e(){a.setCanonical("http://rede.natura.net"+d.path())}e()}angular.module("copycatNaturaEcommerceWebApp").controller("CanonicalCtrl",["$scope","$window","$filter","$location","$routeParams",a])}(),function(){function a(a,b,c,d,e){function f(){var c=b.$$search;a.oldPassword=c.nwpwd,a.email=c.usr,a.password="",a.confirmPassword=""}function g(){if(h()){var b={email:a.email,oldPassword:a.oldPassword,password:a.password};i(b)}}function h(){return""===a.password?(a.notificationErrorMessage(d.PASSWORD_REQUIRED),!1):a.password.length<6?(a.notificationErrorMessage(d.PASSWORD_SHORT),!1):a.password!==a.confirmPassword?(a.notificationErrorMessage(d.PASSWORD_NOT_EQUALS),!1):!0}function i(b){a.setLoading(c.loading()),e.changePassword(b).then(function(b){"SUCCESS"===b.status?(a.passwordSuccess=!0,a.setUserLogged(b.result),a.loadBag()):a.notificationErrorMessage(d.CHANGE_PASSWORD_ERROR),a.setLoading(!c.hasToStopLoading())})}function j(){b.path("/")}a.changePassword=g,a.redirectHome=j,f()}angular.module("copycatNaturaEcommerceWebApp").controller("ChangePasswordCtrl",["$scope","$location","VisualService","UserErrorService","UserService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){if(a.loadPageInformation(void 0,void 0),c.scrollTo(0,0),a.isPartnerGift=m.isPartnerGiftPurchase(),a.order=a.isPartnerGift?g.getBag():h.getOrder(),a.orderAddress=t(a.order.address),a.isEmpty(a.order)?b.path("/"):(q(),a.isFirstTime=!0,a.showModalSend=!1,a.isPartnerGift||s()),j.hasSupport()){var d=window.addToHomescreen();d.clearSession(),window.addToHomescreen(),l.addToHomeCallback()}}function o(){a.isPartnerGift&&s(),c.scrollTo(0,0),b.path("/")}function p(b){a.showModalSend=b}function q(){a.order&&a.order.billingNumber&&(a.order.billingNumber=a.order.billingNumber.replace(/\s/gi,"."))}function r(){var b={request:{email:a.userLogged.email,firstName:a.userLogged.name,cn:a.consultantSelected.name,cnSpaceId:a.consultantSelected.cnUserName,orderNumber:a.order.orderNumber,orderTotal:a.order.total,billingNumber:a.order.billingNumber,billingDueDate:a.order.billingDueDate}};a.setLoading(d.loading()),e.sendPaymentBoleto(b).then(function(b){a.isFirstTime||("SUCCESS"===b.status?a.setShowModalSend(!0):a.notificationErrorMessage(f.SEND_EMAIL_BOLETO)),a.isFirstTime=!1,a.setLoading(!d.hasToStopLoading())})}function s(){g.clearBag(),a.setBag({}),i.resetServiceToLoadProducts()}function t(a){if(a){var b=a.split('<div class="ck_left">'),c=b[1].split('<span class="ck_label result">'),d=c[1].split("</span>"),e=d[0];d=c[2].split("</span>");var f=d[0];d=c[3].split("</span>");var g=d[0];c=b[2].split('<span class="ck_label result">'),d=c[1].split("</span>");var h=d[0];c=b[3].split('<span class="ck_label result">'),d=c[1].split("</span>");var i=d[0];c=b[4].split('<span class="ck_label result">'),d=c[1].split("</span>");var j=d[0];c=b[7].split('<span id="ck_receives_order" class="ck_label result">'),d=c[1].split("</span>");var k=d[0],l={zipCode:e,street:f,neighborhood:h,number:g,city:i,state:j,nome_encomenda:k};return l}}function u(){c.open("https://survey.ebit.com.br/survey/first?storeId=59301&empresa=1593015#/step_one")}a.resumeBuy=o,a.setShowModalSend=p,a.sendBillingEmail=r,a.redirectEbit=u,n()}angular.module("copycatNaturaEcommerceWebApp").controller("FinishOrderCtrl",["$scope","$location","$window","VisualService","EmailService","UserErrorService","BagService","BuyService","ProductService","LocalStorageService","$sce","GoogleTagManagerService","AddressService",a])}(),function(){function a(a,b,c,d,e){function f(){a.loadPageInformation(void 0,void 0),a.ActualItemUrl="",a.ActualCategoryUrl=""}function g(d,f,g,h){if(a.ActualItem=null,a.ActualCategory=null,a.ActualSubcategory=null,void 0!==h)if(h){a.setMenuOpened(!0);var i=angular.element(b).innerHeight()-70+"px";angular.element(".menuFix").css("height",i),a.menuNivel1=d,a.menuNivel2=f,a.menuNivel3=g,angular.element(".fullContent").addClass("positionFixed"),angular.element(".menuFix").removeClass("overflowHidden")}else h||(a.setMenuOpened(!1),angular.element(".fullContent").removeClass("positionFixed"),angular.element(".menuFix").addClass("overflowHidden"),angular.element(".menuFix").scrollTo(0,0),e.getAccessProductsFromMenu()||(a.ActualItemUrl=null,a.ActualItem=null,e.setShowBreadcrumb(!1)));else c(function(){a.menuNivel1=d,a.menuNivel2=f,a.menuNivel3=g,angular.element(".menuFix").scrollTo(0,0)},300)}function h(b,c){1===b?a.ActiveItemOnMenu=c:2===b&&(a.ActiveCategoryOnMenu=c),e.setBreadcrumb(b,c)}function i(b,c){a.ActualItemUrl=b,a.ActualItem=c}function j(d,e){a.ActualCategoryUrl=d,a.ActualCategory=e,c(function(){b.scrollTo(0,0)},400)}function k(b){a.ActualSubcategory=b}function l(a){if(a){var b=[];return b.push("faixa de preço"),b.push("faixa de preços"),b.push("mais vendidos"),b.push("refis"),b.push("+ moda + casa"),b.push("natura +moda +casa"),b.indexOf(a.toLowerCase())>-1?!1:!0}}function m(){a.menuOpened&&c(function(){a.setMenu(!1,!1,!1,!1)},100)}function n(a){e.setAccessProductsFromMenu(a)}a.setMenu=g,a.setBreadcrumb=h,a.setMenuItem=i,a.setMenuCategory=j,a.setMenuSubcategory=k,a.filterMenu=l,a.setAccessProductsFromMenu=n,a.$on("newViewLoaded",function(){m()}),f()}angular.module("copycatNaturaEcommerceWebApp").controller("MenuController",["$scope","$window","$timeout","$location","MenuService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){var a=p.processConsultantUrl();(a.set||a.remove)&&Lb(a.consultantToSet),Bc(a),a.url&&(f.path(a.url),f.replace())}function x(b){a.canonical=b}function y(b,c,d,e){var g=f.absUrl(),h=m.getConsultant();a.title="",a.pageUrl=g,a.pageImage=b||"../images/natura-icon.png",a.pageDescription=c||"Compre produtos Natura com um consultor de um jeito fácil e seguro, com mais opções de pagamento e a garantia da entrega realizada pela própria Natura.",a.pageKeywords=d||"Natura, Rede, Rede Natura, Cosméticos, Comprar";var i=p.getView();"home"===i?a.title=h?h.name+" | Rede Natura":"Rede Natura":"sacola"===i?a.title="Sacola | Rede Natura":"produto-detalhe"===i?a.title=e||"Detalhes do Produto | Rede Natura":"produtos"===i?a.title=e||"Produtos | Rede Natura":"busca"===i?a.title="Busca | Rede Natura":"saladebemestar"===i?a.title="Sala de Bem Estar | Rede Natura":"linhas"===i&&(a.title="Linhas | Rede Natura")}function z(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function A(a){f.path(a)}function B(a){return a=a.replace("R$","").replace(".","").replace(",",".").trim(),isNaN(a)?null:parseFloat(a)}function C(a){var b=2,c=",",d=".",e=0>a?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b))+"",g=f.length;return g=g>3?g%3:0,e+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")}function D(){return a.setCanonical("http://rede.natura.net/"),a.loadPageInformation(void 0,void 0),yc()===!0?void zc():(c(function(){b.scroll(0,0)},1e3,1),a.showContent=!0,a.loadingViewCount=0,a.isLoading=!1,a.contentHome={},a.error={},a.showModalEntrega=!1,K(),a.loginUser={},a.imgLogin="../images/bt_login.png",a.socialLogin=!0,a.newRegister={},a.isSoftLogin=!1,a.showLogin=!1,a.showRegister=!1,a.showFieldsFromCheckout=!1,a.showModalForgotPassword=!1,a.showModalSuccessPassword=!1,a.showModalFacebook=!1,a.loginFacebook={},ub(),a.consultantSelected={},a.errorNoCnSelected=!1,a.showConsultantSelected=!1,a.showRecommendedConsultant=!1,a.showSearchConsultant=!1,a.showConsultantList=!1,a.searchConsultant={val:""},a.hasToLoadMoreConsultant=!0,a.showModalChangeCN=!1,a.ratingSuccess=!1,vb(),a.showAutoComplete=!1,a.showCaptcha=!1,a.selectedProduct={},a.productSearch={val:""},a.isFromSearch=!1,a.bag={},a.showBag=!1,a.isBagPage=!1,a.itemsInBag="0 itens",Tb(),m.getHasToRemoveConsultant()&&a.consultantSelected,a.bannerClick=!1,void tc())}function E(b){a.isLoading=b}function F(b){c.cancel(a.hideMessageError),c.cancel(a.hideMessageErrorBox),a.error.message=b,a.error.class="error-opened";var d=3e3;b.indexOf("foi desativado")>-1&&(d=6e3),a.hideMessageErrorBox=c(function(){a.hideMessageError=c(function(){a.error.message=""},d/2,1),a.error.class=""},d,1)}function G(){var b=p.getView(),c=!1;return"busca"===b&&(c=!0),a.isFromSearch&&c}function H(b,d){c.cancel(a.hideMessageError),c.cancel(a.hideMessageErrorBox),a.error.message=b,a.error.class="error-opened";var e=d;b.indexOf("foi desativado")>-1&&(e=6e3),a.hideMessageErrorBox=c(function(){a.hideMessageError=c(function(){a.error.message=""},e/2,1),a.error.class=""},e,1)}function I(){c.cancel(a.hideMessageError),c.cancel(a.hideMessageErrorBox),a.error.class="",a.hideMessageError=c(function(){a.error.message=""},1500,1)}function J(b){a.showContent=b}function K(){a.setLoading(i.loading()),i.loadContentHome().then(function(b){a.contentHome=b,a.carouselHome=b.carousel,a.sliderFooter=b.footer,a.menu=b.menus,a.homeFashion=b.homeFashion,a.setLoading(!i.hasToStopLoading())})}function L(){a.hideLoginArea(),a.hideConsultantArea(),a.setShowContent(!0)}function M(){angular.element(document).scrollTop(0,1e3)}function N(){b.scroll(0,0),L(),Hb(),K(),f.path("/").search({}),a.isFromSearch=!1}function O(b){a.showModalEntrega=b}function P(){return a.isUserLogged||a.isConsultantSelected}function Q(b){a.menuOpened=b}function R(){if(a.isSoftLogin&&(a.loginUser.email=a.emailSoftlogin),cb()){a.setLoading(i.loading());var b=angular.copy(a.loginUser);
if(a.showCaptcha){var c=document.getElementById("recaptcha_challenge_field").value,d=document.getElementById("recaptcha_response_field").value;b.recaptchaChallenge=c,b.recaptchaResponse=d}a.userData?a.userData.email!==b.email?S(b):T(b):S(b)}}function S(a){l.login(a).then(function(a){U(a)})}function T(a){l.associateUser(a).then(function(a){U(a)})}function U(c){"SUCCESS"===c.status?(V(c.result),a.setShowContent(!0),a.setShowCaptcha(!1),t.setTermsAccepted(c.result.latestTermsAndConditionsAccepted),W(!1),a.isConsultantSelected&&Lb(a.consultantSelected),Sb(),b.scroll(0,0),a.$broadcast("Logged"),a.hideLoginArea()):"USER_ERROR"===c.status?"INVALID_LOGIN"===c.userErrorKey?(a.loginUser.password="",c.result.messages[0].loginCount>2&&a.setShowCaptcha(!0),a.notificationErrorMessage(j.INVALID_LOGIN)):"UNREGISTERED_USER"===c.userErrorKey&&a.notificationErrorMessage(j.UNREGISTERED_USER):a.notificationErrorMessage(j.LOGIN_ERROR),a.setLoading(!i.hasToStopLoading())}function V(b){a.loginUser={},a.isUserLogged=!0,a.userLogged=b,a.imgLogin="http://"+b.imageUrl}function W(b){a.isSoftLogin=b,b&&(a.emailSoftlogin=l.getEmail(),a.toggleLoginArea())}function X(){Y()?(a.setShowModalLogout(!0),a.setShowFieldsFromCheckout(!1)):ab()}function Y(){return o.getBag()&&o.getBag().commerceItems&&o.getBag().commerceItems.length>0?!0:!1}function Z(b){a.showModalLogout=b}function ab(){a.setShowModalLogout(!1),a.setLoading(i.loading()),l.logout().then(function(b){"SUCCESS"===b.status?(a.isUserLogged=!1,a.imgLogin="../images/bt_login.png",a.userLogged={},a.setSoftLogin(!1),a.toggleLoginArea(),bb(),a.isConsultantSelected?Lb(a.consultantSelected):Sb()):a.notificationErrorMessage(j.LOGOUT_ERROR),a.setLoading(!i.hasToStopLoading())})}function bb(){window.gigya.socialize.logout({forceProvidersLogout:!0})}function cb(){return a.loginUser.email?a.loginUser.email.match(k.email)?a.loginUser.password?a.loginUser.password.length<6?(a.notificationErrorMessage(j.PASSWORD_SHORT),!1):!0:(a.notificationErrorMessage(j.PASSWORD_REQUIRED),!1):(a.notificationErrorMessage(j.EMAIL_INVALID),!1):(a.notificationErrorMessage(j.EMAIL_REQUIRED),!1)}function db(){a.setShowLogin(!1),a.setShowRegister(!1)}function eb(b){a.socialLogin=b}function fb(){if(a.showFieldsFromCheckout&&a.isEmpty(a.consultantSelected)&&Lb(a.recommendedConsultant,!0),kb()){var b=angular.copy(a.newRegister);a.showFieldsFromCheckout&&(b=jb(b));var c=k.extractFirstAndLastName.exec(b.fullName);b.firstName=c[1],b.lastName=c[2],a.setLoading(i.loading()),a.userData?a.userData.email!==b.email?gb(b):hb(b):gb(b)}}function gb(a){l.register(a).then(function(a){ib(a)})}function hb(a){l.socialRegister(a).then(function(a){ib(a)})}function ib(c){"SUCCESS"===c.status?(a.setUserLogged(c.result),a.hideAllOpenedAreas(),a.newRegister={},a.setShowFieldsFromCheckout(!1),b.scroll(0,0),W(!1),a.$broadcast("Registered")):"USER_ERROR"===c.status?"USER_ALREADY_EXISTS"===c.userErrorKey?a.notificationErrorMessage(j.USER_ALREADY_EXISTS):"EMAIL_ALREADY_EXISTS"===c.userErrorKey?a.notificationErrorMessage(j.EMAIL_ALREADY_EXISTS):"CPF_ALREADY_EXISTS"===c.userErrorKey?a.notificationErrorMessage(j.CPF_ALREADY_EXISTS):"INVALID_EMAIL"===c.userErrorKey&&a.notificationErrorMessage(j.INVALID_EMAIL):a.notificationErrorMessage(j.REGISTER_ERROR),a.setLoading(!i.hasToStopLoading())}function jb(a){return a.phone1=a.ddd1+a.phone1,a.phoneType1="residencial",a}function kb(){return a.newRegister.email?a.newRegister.email.match(k.email)?a.showFieldsFromCheckout&&a.newRegister.email!==a.newRegister.newEmail?(a.notificationErrorMessage(j.EMAIL_NOT_EQUALS),!1):a.newRegister.fullName?lb(a.newRegister.fullName)?a.showFieldsFromCheckout&&!a.newRegister.cpf?(a.notificationErrorMessage(j.CPF_REQUIRED),!1):a.showFieldsFromCheckout&&!mb(a.newRegister.cpf.toString())?(a.notificationErrorMessage(j.CPF_INVALID),!1):a.showFieldsFromCheckout&&!a.newRegister.gender?(a.notificationErrorMessage(j.GENDER_REQUIRED),!1):a.showFieldsFromCheckout&&!a.newRegister.birthdate?(a.notificationErrorMessage(j.BIRTHDAY_REQUIRED),!1):a.showFieldsFromCheckout&&!ob(a.newRegister.birthdate)?(a.notificationErrorMessage(j.BIRTHDAY_INVALID),!1):a.showFieldsFromCheckout&&!nb(a.newRegister.birthdate)?(a.notificationErrorMessage(j.BIRTHDAY_RANGE),!1):a.showFieldsFromCheckout&&!a.newRegister.ddd1?(a.notificationErrorMessage(j.DDD_REQUIRED),!1):a.showFieldsFromCheckout&&a.newRegister.ddd1.length<2?(a.notificationErrorMessage(j.DDD_INVALID),!1):a.showFieldsFromCheckout&&!a.newRegister.phone1?(a.notificationErrorMessage(j.PHONE_REQUIRED),!1):a.showFieldsFromCheckout&&a.newRegister.phone1.length<8?(a.notificationErrorMessage(j.PHONE_INVALID),!1):a.newRegister.password?a.newRegister.password.length<6?(a.notificationErrorMessage(j.PASSWORD_SHORT),!1):a.showFieldsFromCheckout&&a.newRegister.password!==a.newRegister.passwordConfirm?(a.notificationErrorMessage(j.PASSWORD_NOT_EQUALS),!1):a.newRegister.acceptedTerm?!0:(a.notificationErrorMessage(j.TERM_NOT_ACCEPTED),!1):(a.notificationErrorMessage(j.PASSWORD_REQUIRED),!1):(a.notificationErrorMessage(j.FULLNAME_INVALID),!1):(a.notificationErrorMessage(j.FULLNAME_REQUIRED),!1):(a.notificationErrorMessage(j.EMAIL_INVALID),!1):(a.notificationErrorMessage(j.EMAIL_REQUIRED),!1)}function lb(a){var b=a.split(" ");return b[0].length<2||1===b.length?!1:!0}function mb(a){if(a=(a||"").replace(/\D/g,""),11!==a.length||"00000000000"===a||"11111111111"===a||"22222222222"===a||"33333333333"===a||"44444444444"===a||"55555555555"===a||"66666666666"===a||"77777777777"===a||"88888888888"===a||"99999999999"===a)return!1;for(var b=0,c=0;9>c;c++)b+=parseInt(a.charAt(c))*(10-c);var d=11-b%11;if((10===d||11===d)&&(d=0),d!==parseInt(a.charAt(9)))return!1;for(b=0,c=0;10>c;c++)b+=parseInt(a.charAt(c))*(11-c);return d=11-b%11,(10===d||11===d)&&(d=0),d!==parseInt(a.charAt(10))?!1:!0}function nb(a){var b=parseInt(a.substring(6)),c=new Date;c=c.getFullYear();var d=c-b;return 100>=d&&d>=16}function ob(b){if(-1===b.indexOf("/")){var c=b.substring(0,2)+"/"+b.substring(2,4)+"/"+b.substring(4);a.newRegister.birthdate=c}return a.newRegister.birthdate.match(k.date)}function pb(c){a.showLogin=c,s.get("captchaOpened")&&a.setShowCaptcha(!0),c&&b.scroll(0,0)}function qb(c){a.isEmpty(a.recommendedConsultant)&&wb(),a.showRegister=c,c&&(a.setShowLogin(!1),a.setShowContent(!1),b.scroll(0,0))}function rb(){a.hideConsultantArea(),angular.element(".fullContent").removeClass("positionFixed"),a.showLogin||a.showRegister?a.showRegister?(a.setShowLogin(!0),a.setShowRegister(!1),a.setShowContent(!1)):(a.setShowLogin(!1),a.setShowContent(!0),a.menuOpened&&angular.element(".fullContent").addClass("positionFixed")):(a.setShowLogin(!0),a.setShowContent(!1))}function sb(b){a.showModalForgotPassword=b,b||(a.showModalSuccessPassword=!1,a.forgetPassword={})}function tb(b){a.showModalSuccessPassword=b}function ub(){a.userLogged=l.getUser(),a.isUserLogged=l.getUserLogged()}function vb(){a.consultantSelected=m.getConsultant(),a.isConsultantSelected=m.getConsultantSelected(),a.nameConsultant=m.getConsultantName(),a.isEmpty(a.consultantSelected)?wb():a.consultantImage=a.consultantSelected.image}function wb(){a.setLoading(i.loading()),m.getRecommendedConsultant().then(function(b){"SUCCESS"===b.status?(a.recommendedConsultant=b.result,i.getHasToChangeCN()&&Eb()):a.notificationErrorMessage(j.SUGGEST_CN_ERROR),a.setLoading(!i.hasToStopLoading())})}function xb(b){a.hasToLoadMoreConsultant&&(a.setLoading(i.loading()),m.getConsultantList(b).then(function(b){"SUCCESS"===b.status?(b.result.pageCount&&parseInt(b.result.pageCount)===b.result.actualPage&&a.setHasToLoadMoreConsultant(!1),b.result.listCns.length>0?a.consultantsList=b.result.listCns:a.notificationErrorMessage(j.CONSULTOR_NOT_FOUND_SEARCH)):a.notificationErrorMessage(j.CONSULTOR_NOT_FOUND_SEARCH),a.setLoading(!i.hasToStopLoading())}))}function yb(){a.setShowConsultantSelected(!1),a.setShowRecommendedConsultant(!1),a.setShowSearchConsultant(!1),a.setShowConsultantList(!1),a.setShowContent(!0),a.menuOpened&&angular.element(".fullContent").addClass("positionFixed")}function zb(b){a.showConsultantSelected=b}function Ab(b){a.showRecommendedConsultant=b}function Bb(b){a.isConsultantArea=m.isConsultantArea,a.showSearchConsultant=b}function Cb(b){a.showConsultantList=b}function Db(b){a.nameConsultant=b}function Eb(){angular.element(".fullContent").removeClass("positionFixed"),a.hideLoginArea(),a.setShowContent(!1),a.setShowSearchConsultant(!1),Hb();var c=i.getHasToChangeCN();a.showRecommendedConsultant?a.showRecommendedConsultant&&a.hideConsultantArea():(b.scroll(0,0),c?(a.setShowRecommendedConsultant(!0),a.setShowConsultantSelected(!1)):a.isConsultantSelected?a.showConsultantSelected?a.hideConsultantArea():a.setShowConsultantSelected(!0):a.setShowRecommendedConsultant(!0)),i.setHasToChangeCN(!1)}function Fb(){$("body,html").animate({scrollTop:0},300),a.setShowRecommendedConsultant(!1),a.setShowSearchConsultant(!0)}function Gb(){a.setShowRecommendedConsultant(!0),a.setShowSearchConsultant(!1),Hb()}function Hb(){a.consultantsList=[],a.searchConsultant.val="",m.clearConsultantSearch()}function Ib(b){if(a.consultantsList=[],b){var c=/^[A-Za-z\s]+$/,d=/^\d+$/;if(b.match(c)){if(b.length<=2)return a.notificationErrorMessage(j.SEARCH_CN_TOO_SHORT),!1}else if(b.match(d)&&8!==b.length)return a.notificationErrorMessage(j.SEARCH_CN_CEP_TOO_SHORT),!1;a.setHasToLoadMoreConsultant(!0),xb(b)}}function Jb(b){a.hasToLoadMoreConsultant=b}function Kb(){var b=p.getView(),c=f.path(),d=a.consultantSelected.cnUserName;-1===c.indexOf(d)&&(c=c.split("/"),"home"===b?f.path("/espaco/"+d):"produtos"===b?("nossos-produtos"===c[2]?c.splice(2,0,d):c.splice(2,1,d),c=c.join("/"),f.path(c)):"produto-detalhe"===b&&(-1!==c[2].indexOf("-")?c.splice(2,0,d):c.splice(2,1,d),c=c.join("/"),f.path(c)))}function Lb(c,d){a.setLoading(i.loading()),m.setConsultant(c).then(function(c){"SUCCESS"===c.status?(a.isConsultantSelected=!0,a.consultantSelected=c.result,a.nameConsultant=a.consultantSelected.name,a.title=a.nameConsultant,a.consultantImage=a.consultantSelected.image,Hb(),Sb(!0),a.hideConsultantArea(),d&&m.setIsConsultantArea(!0),d||m.isConsultantArea()||a.showFieldsFromCheckout?qb(!1):o.getTryToCheckout()&&cc(),Kb(),a.$broadcast("ConsultantSelected"),b.scroll(0,0),ac()):"USER_ERROR"===c.status?"INACTIVE_CN"===c.userErrorKey?(a.notificationErrorMessage(c.result+" Continue navegando e encontre outro(a) consultor(a)."),f.path("/")):"INVALID_CONSULTANT"===c.userErrorKey&&(a.notificationErrorMessage(j.INVALID_CONSULTANT),f.path("/espaco")):a.notificationErrorMessage(j.CONSULTANT_ERROR),a.setLoading(!i.hasToStopLoading())})}function Mb(b){Yb();var c=parseInt(a.itemsInBag.replace(" item","").replace(" itens",""));0===c?Nb():Ob(!0),m.setIsConsultantArea(b)}function Nb(){Ob(!1),i.setHasToChangeCN(!0),wb()}function Ob(b){a.showModalChangeCN=b}function Pb(b){a.overStar=b}function Qb(){if(!a.ratingSuccess)if(a.overStar){var b={request:{cnRating:a.overStar}};Rb(b)}else a.notificationErrorMessage(j.RATING_NOT_SELECTED)}function Rb(b){a.setLoading(i.loading()),m.ratingCN(b).then(function(b){"SUCCESS"===b.status?a.ratingSuccess=!0:a.notificationErrorMessage(j.RATING_CN_ERROR),a.setLoading(!i.hasToStopLoading())})}function Sb(){a.setLoading(i.loading()),o.loadBag().then(function(b){"SUCCESS"===b.status?(a.setBag(b.result),Ub(),a.errorNoCnSelected&&(ec(!1),f.path("/address")),sc(),a.$broadcast("BagChanged")):a.notificationErrorMessage("USER_ERROR"===b.status?b.userErrorKey:j.RETRIEVE_BAG_ERROR),a.setLoading(!i.hasToStopLoading())})}function Tb(){a.setBag(o.getBag()),Ub()}function Ub(){a.setShowBag(p.shouldShowBag()),Yb();var b=p.getView();a.setIsBagPage("sacola"===b?!0:!1)}function Vb(a){return a.isPartnerGift?!1:a.isSurpriseGift?!0:!1}function Wb(b,c){a.setLoading(i.loading()),o.addInBag(b,c).then(function(b){"SUCCESS"===b.status?(a.setBag(b.result),void 0!==b.result.messages&&b.result.messages.length>0&&a.notificationErrorMessage(b.result.messages[0].errorMsg),Ub(),a.$broadcast("BagChanged")):a.notificationErrorMessage("USER_ERROR"===b.status?"MULTIPLE_GIFTS_IN_CART"===b.userErrorKey?j.MULTIPLE_GIFTS_IN_CART:"UNAVAILABLE_FOR_SALE"===b.userErrorKey?j.UNAVAILABLE_FOR_SALE:"UNAVAILABLE_FOR_SALE2"===b.userErrorKey?j.UNAVAILABLE_FOR_SALE:j.QUANTITY_BAG_ERROR:j.ADD_BAG_ERROR),a.setLoading(!i.hasToStopLoading())})}function Xb(b){a.bag=b,o.setBag(a.bag),Yb()}function Yb(){var b=0;if(a.bag.commerceItems)for(var c=a.bag.commerceItems.length,d=0;c>d;d++)Vb(a.bag.commerceItems[d])||(b+=a.bag.commerceItems[d].quantity);b=1===b?b+" item":b+" itens",a.itemsInBag=b}function Zb(b){a.showBag=b}function $b(b){a.isBagPage=b}function _b(){for(var b=a.bag,c=0;c<b.commerceItems.length;c++)if("PID00001"===b.commerceItems[c].productId)return c;return-1}function ac(){var a=f.search();a.cartList&&a.cartList!==!0&&bc(a.cartList),p.clearUrlParameters()}function bc(b){a.setLoading(i.loading()),o.addExternalBag(b).then(function(b){if("SUCCESS"===b.status){void 0!==b.result.messages&&b.result.messages.length>0&&a.notificationErrorMessage(b.result.messages[0].errorMsg),Sb(),Ub();var c=f.search();delete c.cartList,f.search(c)}else a.notificationErrorMessage(j.EXTERNAL_BAG_ERROR);a.setLoading(!i.hasToStopLoading())})}function cc(){return a.isEmpty(a.userLogged)?(o.setTryToCheckout(!0),a.setShowFieldsFromCheckout(!0),void rb()):a.isEmpty(a.consultantSelected)?(o.setTryToCheckout(!0),void(a.userLogged.cpf?Eb():(a.setShowFieldsFromCheckout(!0),dc()))):void dc()}function dc(){a.setLoading(i.loading()),o.validateBuy().then(function(b){"SUCCESS"===b.status?(t.setTermsAccepted(b.result.latestTermsAndConditionsAccepted),f.path("/address")):"USER_ERROR"===b.status?"NO_CN_SELECTED"===b.userErrorKey?(ec(!0),Lb(a.consultantSelected)):("PREVIOUS_SESSION_NEEDED_NATURA"===b.userErrorKey||"PREVIOUS_SESSION_NEEDED"===b.userErrorKey)&&(i.setActionSoftLogin("validateBuy"),a.setSoftLogin(!0)):a.notificationErrorMessage(j.CHECKOUT_NOT_AVAILABLE),a.setLoading(!i.hasToStopLoading())})}function ec(b){a.errorNoCnSelected=b}function fc(b){a.showFieldsFromCheckout=b}function gc(b){a.productSearch.val=b,b.length>2?g(ic,100):a.setShowAutoComplete(!1)}function hc(b){a.showAutoComplete=b}function ic(){n.getTherms(a.productSearch.val).then(function(b){a.setShowAutoComplete(b.length>0?!0:!1),a.autoComplete=b})}function jc(b){if(a.showCaptcha=b,a.showCaptcha){s.add("captchaOpened",b);var c="6LfsePsSAAAAAEsugMx5HEg9kIhCZ20ZysPPIXnz";r.render(c)}else s.remove("captchaOpened")}function kc(){a.productSearch.val="",a.setShowAutoComplete(!1)}function lc(b){a.resetTerm(),f.path("/product/search/"+b),a.isFromSearch=!0}function mc(a){var b=e("currency");return b(a,"R$ ").replace(/,/g,".").replace(/(.*)\.(\d{2})/,"$1,$2")}function nc(a){return a?!a.outOfStock&&!a.unavailable:void 0}function oc(a,b){var c=a.productUrl;if(b){var d=b.sku;f.path(c).search("sku",d)}else f.path(c)}function pc(a,b){if("produto"===b)a.isProductSelected=!0,a.isRefilSelected=!1,a.name=a.name.replace("Refil ",""),qc(a);else{a.isProductSelected=!1,a.isRefilSelected=!0;var c=a.refils[0];c.productUrl=a.productUrl,qc(c),-1===a.name.indexOf("Refil")&&(a.name="Refil "+a.name)}}function qc(b){a.selectedProduct={productId:b.productId,sku:b.sku,productUrl:b.productUrl,outOfStock:b.outOfStock,unavailable:b.unavailable,isRegionDependent:b.isRegionDependent}}function rc(){var a=f.$$search;a.promocode&&a.promocode!==!0&&h.add("coupon",a.promocode)}function sc(){var a=i.getActionSoftLogin();"validateBuy"===a?cc():"loadOrders"===a&&f.path("/meuspedidos"),i.setActionSoftLogin(null)}function tc(){window.gigya.socialize.addEventHandlers({context:{str:"congrats on your"},onLogin:uc})}function uc(b){var c={};a.userData=b.user;for(var d in b.user)b.user.hasOwnProperty(d)&&"object"!=typeof b.user[d]&&(c[d]=b.user[d]);a.setLoading(i.loading()),l.socialLogin(c).then(function(b){"SUCCESS"===b.status?vc(b):"USER_ERROR"===b.status?"FORBIDDEN_EMAIL"===b.userErrorKey?a.notificationErrorMessage(j.FORBIDDEN_EMAIL):"USER_NOT_LINKED"===b.userErrorKey&&(wc(!0),a.loginFacebook.email=a.userData.email):a.notificationErrorMessage(j.FACEBOOK_LOGIN_ERROR),a.setLoading(!i.hasToStopLoading())})}function vc(c){"SUCCESS"===c.status&&c.result.id&&(V(c.result),a.hideLoginArea(),a.setShowContent(!0),a.setShowCaptcha(!1),W(!1),a.isConsultantSelected?Lb(a.consultantSelected):Sb(),b.scroll(0,0),a.$broadcast("Logged"))}function wc(b){a.showModalFacebook=b}function xc(b){b?(a.loginUser.email=a.userData.email,a.newRegister={}):(a.setShowRegister(!0),a.newRegister={email:a.userData.email,fullName:a.userData.firstName+" "+a.userData.lastName},a.loginUser={}),wc(!1)}function yc(){return/facebookexternalhit\/[0-9]|Twitterbot|Pinterest|Google.*snippet/i.test(navigator.userAgent)?!0:!1}function zc(){var a=new XMLHttpRequest;throw a.abort(),new Error("Crawler detected, execution halted.")}function Ac(b){a.bannerClick=!0,window.location.href=b}a.isEmpty=z,a.redirectUrl=A,a.removeMoneySigns=B,a.formatToReal=C,a.validateName=lb,a.validateCPF=mb,a.validateRangeYears=nb,a.loadPageInformation=y,a.setCanonical=x,a.init=D,a.setLoading=E,a.notificationErrorMessage=F,a.notificationErrorMessageTimer=H,a.hideErrorMessage=I,a.setShowContent=J,a.hideAllOpenedAreas=L,a.toTheTop=M,a.clickLogo=N,a.setShowModalEntrega=O,a.hasPermissionToCheckout=P,a.setMenuOpened=Q,a.setShowModalLogout=Z,a.doLogin=R,a.setUserLogged=V,a.setSoftLogin=W,a.confirmLogout=X,a.doLogout=ab,a.hideLoginArea=db,a.setSocialLogin=eb,a.setShowLogin=pb,a.userRegister=fb,a.setShowRegister=qb,a.toggleLoginArea=rb,a.setShowModalForgotPassword=sb,a.setShowModalSuccessPassword=tb,a.setShowModalFacebook=wc,a.checkLoginFacebook=xc,a.loadConsultantList=xb,a.hideConsultantArea=yb,a.setShowConsultantSelected=zb,a.setShowRecommendedConsultant=Ab,a.setShowSearchConsultant=Bb,a.setShowConsultantList=Cb,a.setNameConsultant=Db,a.toggleConsultantArea=Eb,a.openSearchConsultant=Fb,a.hideSearchConsultant=Gb,a.doSearchConsultants=Ib,a.setHasToLoadMoreConsultant=Jb,a.setConsultant=Lb,a.verifyChangeCN=Mb,a.changeCN=Nb,a.setShowModalChangeCN=Ob,a.ratingOver=Pb,a.ratingCN=Qb,a.shouldShowTextCn=G,a.debounceAutoComplete=gc,a.setShowAutoComplete=hc,a.resetTerm=kc,a.findProduct=lc,a.setShowCaptcha=jc,a.formatCurrency=mc,a.isAvailable=nc,a.linkToProductDetail=oc,a.selectType=pc,a.loadBag=Sb,a.addProductInBag=Wb,a.setBag=Xb,a.setShowBag=Zb,a.setIsBagPage=$b,a.indexOfGiftOnBag=_b,a.addExternalBag=bc,a.shouldShowBag=Ub,a.redirectBanner=Ac,a.validateBuy=cc,a.setShowFieldsFromCheckout=fc;var Bc=_.once(function(a){a.remove||a.set||ac()});a.$on("$locationChangeStart",function(){w(),p.clearUrlParameters()}),a.$on("$viewContentLoaded",function(){a.loadPageInformation(void 0,void 0),Ub(),a.setShowAutoComplete(!1),i.setHasToChangeCN(!1),c(function(){u.init()},800,1),p.callChaordic(),q.sendTags(),rc(),a.isCheckout=p.isCheckoutPage(),a.$broadcast("newViewLoaded")}),a.$on("TriedToApplyCoupon",function(){a.isUserLogged||rb()}),a.$on("Logged",function(){return v.getTryToApplyCoupon()?void v.proceedToCouponUrl():(o.getTryToCheckout()&&(a.isConsultantSelected||null===a.userLogged.cpf||""===a.userLogged.cpf?(o.setTryToCheckout(!1),a.setShowFieldsFromCheckout(!1),f.path("/address")):Eb()),void q.sendTagLogged())}),a.$on("Registered",function(){return v.getTryToApplyCoupon()?void v.proceedToCouponUrl():(o.getTryToCheckout()&&(s.get("NaturaCartItems"),a.isConsultantSelected?(o.setTryToCheckout(!1),f.path("/address"),a.setShowFieldsFromCheckout(!1)):Eb()),void q.sendTagLogged())}),a.$on("ConsultantSelected",function(){o.getTryToCheckout()&&(a.isUserLogged?(o.setTryToCheckout(!1),f.path("/address"),a.setShowFieldsFromCheckout(!1)):m.isConsultantArea()?qb(!0):rb())});var Cc=!1;$(window).keydown(function(a){116==a.keyCode&&(Cc=!0)}),window.onbeforeunload=function(){return!o.getBag()||0===o.getBag().commerceItems.length||Cc===!0||v.getTryToApplyCoupon()||a.bannerClick?void 0:"Você ainda não finalizou a sua compra."}}angular.module("copycatNaturaEcommerceWebApp").controller("HeaderCtrl",["$scope","$window","$interval","$timeout","$filter","$location","$debounce","LocalStorageService","VisualService","UserErrorService","REGEX","UserService","ConsultantService","AutoCompleteService","BagService","UrlService","GoogleTagManagerService","CaptchaService","CookieService","AddressService","ChaordicService","IdentificationService",a])}(),function(){function a(a,b,c,d,e,f){function g(){k=d.contextURL,k?(h(),j()):c.path("/")}function h(){f.setTryToApplyCoupon(!0),f.setCouponUrl(k)}function i(){c.path("/"),c.url(c.path()),a.$emit("TriedToApplyCoupon")}function j(){a.isUserLogged?e.validateBuy().then(function(b){"SUCCESS"===b.status?f.proceedToCouponUrl():("USER_ERROR"!==b.status||"PREVIOUS_SESSION_NEEDED_NATURA"!==b.userErrorKey&&"PREVIOUS_SESSION_NEEDED"!==b.userErrorKey||a.setSoftLogin(!0),i())}):i()}var k;g()}angular.module("copycatNaturaEcommerceWebApp").controller("IdentificationCtrl",["$scope","$window","$location","$routeParams","BagService","IdentificationService",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){b.scrollTo(0,0),h.setTryToCheckout(!1),j()}function j(){var b=g.getFromLocalStorage();a.user={email:b.email,newEmail:"",fullName:b.name+" "+b.surname,cpf:b.cpf,birthdate:b.dob,gender:k(b.gender),receiveNewsLetter:m(b.emailOptIn),receiveNewsLetterSms:m(b.smsOptIn)},l(b)}function k(a){return"male"===a?"M":"female"===a?"F":""}function l(b){a.user.ddd1=b.homePhone.substring(0,2)||"",a.user.phone1=b.homePhone.substring(2)||""}function m(a){return"yes"===a}function n(){if(o()){var b=angular.copy(a.user);q(b)}}function o(){return a.user.email&&""!==a.user.email?a.user.email.match(e.email)?a.user.email!==a.user.newEmail?(a.notificationErrorMessage(d.EMAIL_NOT_EQUALS),!1):""===a.user.fullName?(a.notificationErrorMessage(d.FULLNAME_REQUIRED),!1):a.validateName(a.user.fullName)?""===a.user.cpf?(a.notificationErrorMessage(d.CPF_REQUIRED),!1):a.validateCPF(a.user.cpf.toString())?""===a.user.gender?(a.notificationErrorMessage(d.GENDER_REQUIRED),!1):""===a.user.birthdate?(a.notificationErrorMessage(d.BIRTHDAY_REQUIRED),!1):p(a.user.birthdate)?a.validateRangeYears(a.user.birthdate)?""===a.user.ddd1?(a.notificationErrorMessage(d.DDD_REQUIRED),!1):a.user.ddd1.length<2?(a.notificationErrorMessage(d.DDD_INVALID),!1):""===a.user.phone1?(a.notificationErrorMessage(d.PHONE_REQUIRED),!1):a.user.phone1.length<8?(a.notificationErrorMessage(d.PHONE_INVALID),!1):a.user.password&&a.user.password.length<6?(a.notificationErrorMessage(d.PASSWORD_SHORT),!1):a.user.password&&a.user.password!==a.passwordConfirmation?(a.notificationErrorMessage(d.PASSWORD_NOT_EQUALS),!1):!0:(a.notificationErrorMessage(d.BIRTHDAY_RANGE),!1):(a.notificationErrorMessage(d.BIRTHDAY_INVALID),!1):(a.notificationErrorMessage(d.CPF_INVALID),!1):(a.notificationErrorMessage(d.FULLNAME_INVALID),!1):(a.notificationErrorMessage(d.EMAIL_INVALID),!1):(a.notificationErrorMessage(d.EMAIL_REQUIRED),!1)}function p(b){if(-1===b.indexOf("/")){var c=b.substring(0,2)+"/"+b.substring(2,4)+"/"+b.substring(4);a.user.birthdate=c}return a.user.birthdate.match(e.date)}function q(b){b.phone1=b.ddd1+b.phone1,b.phoneType1="residencial";var h=e.extractFirstAndLastName.exec(b.fullName);b.firstName=h[1],b.lastName=h[2],a.isEmpty(a.consultantSelected)&&a.setConsultant(a.recommendedConsultant,!0),a.setLoading(f.loading()),g.updateUser(b).then(function(b){"SUCCESS"===b.status?(a.setUserLogged(b.result),c.path("/address")):"USER_ERROR"===b.status?"CPF_ALREADY_EXISTS"===b.userErrorKey?a.notificationErrorMessage(d.CPF_ALREADY_EXISTS):"EMAIL_ALREADY_EXISTS"===b.userErrorKey&&a.notificationErrorMessage(d.EMAIL_ALREADY_EXISTS):a.notificationErrorMessage(d.IDENTITY_ERROR),a.setLoading(!f.hasToStopLoading())})}a.update=n,i()}angular.module("copycatNaturaEcommerceWebApp").controller("IdentityCtrl",["$scope","$window","$location","UserErrorService","REGEX","VisualService","UserService","BagService",a])}(),function(){function a(a,b,c,d,e,f){function g(){a.setCanonical("http://rede.natura.net/espaco/nossos-produtos"),h()}function h(){a.loadPageInformation(void 0,void 0),a.setLoading(e.loading()),d.loadLines().then(function(b){"SUCCESS"===b.status?a.lines=b.result:(a.notificationErrorMessage(f.LINES_NOT_FOUND),c.path("/")),a.setLoading(!e.hasToStopLoading())})}b.scroll(0,0),g()}angular.module("copycatNaturaEcommerceWebApp").controller("LinesCtrl",["$scope","$window","$location","ProductService","VisualService","UserErrorService",a])}(),function(){function a(a,b,c){function d(){e()}function e(){a.setLoading(c.loading()),b.naturaMaisPerto().then(function(b){"SUCCESS"===b.status&&(a.carouselMaisperto=b.result),a.setLoading(!c.hasToStopLoading())})}d()}angular.module("copycatNaturaEcommerceWebApp").controller("NaturaMaisPertoCtrl",["$scope","ProductService","VisualService",a])}(),function(){function a(a,b,c,d,e,f){function g(){a.hideAllOpenedAreas(),f.resetOrders(),a.orders=[],a.showButtonMoreOrdersOpened=!1,a.showTextoPedidos=!1,h(),a.ordersHistory=[],a.textShowPedidosAntigos="Mostrar",a.showPedidosAntigos=!1,a.showTextoPedidosAntigos=!1,a.showModalPedido=!1,a.pedidoAtual={}}function h(){a.setLoading(d.loading()),f.getOrdersOpened().then(function(b){"SUCCESS"===b.status?(a.orders=b.result.orders,a.showButtonMoreOrdersOpened=!b.stopPagination):"USER_ERROR"===b.status?"PREVIOUS_SESSION_NEEDED"===b.userErrorKey?(d.setActionSoftLogin("loadOrders"),a.setSoftLogin(!0),c.path("/")):"NO_ORDERS"===b.userErrorKey&&(a.showTextoPedidos=!0):(a.notificationErrorMessage(e.MY_ORDERS_ERROR),c.path("/")),a.setLoading(!d.hasToStopLoading())})}function i(){a.setLoading(d.loading()),f.getOrdersHistory().then(function(b){"SUCCESS"===b.status?(a.ordersHistory=b.result.orders,a.showButtonMoreOrdersHistory=!b.stopPagination):"USER_ERROR"===b.status?"PREVIOUS_SESSION_NEEDED"===b.userErrorKey?(d.setActionSoftLogin("loadOrders"),a.setSoftLogin(!0),c.path("/")):"NO_ORDERS_HISTORY"===b.userErrorKey&&(a.showTextoPedidosAntigos=!0):a.notificationErrorMessage(e.MY_ORDERS_HISTORY_ERROR),a.setLoading(!d.hasToStopLoading())})}function j(){a.showPedidosAntigos=!a.showPedidosAntigos,a.showPedidosAntigos?(a.textShowPedidosAntigos="Ocultar",0===a.ordersHistory.length&&i()):a.textShowPedidosAntigos="Mostrar"}function k(b,c){b===!0?c&&(angular.element(".fullContent").addClass("positionFixed"),a.pedidoAtual=c,a.showModalPedido=!0):(angular.element(".fullContent").removeClass("positionFixed"),a.showModalPedido=!1)}function l(a){return"pedido realizado"===a?"images/steps/step1_green.png":"aguardando confirmação de pagamento"===a?"images/steps/step2_green.png":"pagamento autorizado"===a?"images/steps/step3_green.png":"pedido faturado"===a?"images/steps/step4_green.png":"pedido em transporte"===a?"images/steps/step5_green.png":"aguardando status"===a?"images/steps/step6_green.png":"images/steps/step_cancel.png"}a.loadOrdersOpened=h,a.togglePedidosAntigos=j,a.loadOrdersHistory=i,a.openModalPedido=k,a.verifyStatusImage=l,a.isUserLogged?g():c.path("/")}angular.module("copycatNaturaEcommerceWebApp").controller("MeuspedidosCtrl",["$scope","$window","$location","VisualService","UserErrorService","MeusPedidosService",a])}(),function(){function a(a,b){function c(){b.scrollTo(0,0),a.showModalSend=!1,a.showModalSuccessNotify=!1}function d(a,b){a.actualIndex=b}function e(b){a.actualProductToSend=b}function f(b){a.showModalSend=b,b||(a.showModalSuccessNotify=!1,a.request={})}function g(b){a.showModalSuccessNotify=b}function h(b){a.setActualProductToSend(b.sku),a.setShowModalSend(!0)}a.setSliderIndex=d,a.setActualProductToSend=e,a.setShowModalSend=f,a.showModalNotifyUser=h,a.setShowModalSuccessNotify=g,c()}angular.module("copycatNaturaEcommerceWebApp").controller("ModaCasaCtrl",["$scope","$window",a])}(),function(){function a(a,b,c,d,e,f,g,h){function i(){a.partner=d.partner,a.partnerCoupon=d.partnerCoupon,a.urlRedirect="",k(a.partner,a.partnerCoupon)}function j(){var a=b.absUrl();b.path("/identifique-se").search("contextURL",a)}function k(c,d){function i(){a.setLoading(g.loading());var h=m(c,d);f.loadPartner(h).then(function(c){c&&"SUCCESS"===c.status?(a.loadBag(),a.urlRedirect=c.result.partnerCategoryUrl,l(a.urlRedirect)):(a.notificationErrorMessage(e.COUPON_PARTNER_ERROR),a.setLoading(g.hasToStopLoading()),b.path("/")),a.setLoading(g.hasToStopLoading())})}a.isUserLogged?h.validateBuy().then(function(a){"SUCCESS"===a.status?i():j()}):j()}function l(c){a.setLoading(g.loading());var d=n(c);f.importPartnerProducts(d).then(function(d){d&&"SUCCESS"===d.status?b.path(c):a.notificationErrorMessage(e.PRODUCT_PARTNER_ERROR),a.setLoading(g.hasToStopLoading())})}function m(a,b){var c={request:{partner:a,partnerCoupon:b}};return c}function n(a){var b={request:{categoryUrl:a}};return b}i()}angular.module("copycatNaturaEcommerceWebApp").controller("PartnerCtrl",["$scope","$location","$http","$routeParams","UserErrorService","PartnerService","VisualService","BagService",a])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.loadPageInformation(void 0,void 0),o(),a.setCanonical(a.isSearch?"http://rede.natura.net/busca/"+l.name:l.consultant?"http://rede.natura.net/espaco/"+l.consultant+"/nossos-produtos/"+l.name:"http://rede.natura.net/espaco/nossos-produtos/"+l.name),a.productNotFound=!1,a.actualProductToSend="",a.hasToLoadMoreProducts=!1,a.products=[],g.resetServiceToLoadProducts(),a.methodToLoadProducts(),a.showModalSend=!1,a.showModalSuccessNotify=!1,a.showFilterCategory=!1,a.showFilterPrice=!1,d.scroll(0,0)}function n(a){var b=document.getElementById("titulo-produto"),c="";b&&"undefined"!=typeof b.createShadowRoot&&(c=b.createShadowRoot()),""!==c&&(c.innerHTML='<content select="'+a+'"></content>')}function o(){b.path().indexOf("/product/search")>-1?(a.isSearch=!0,a.searchedTherm=b.path().split("/"),a.searchedTherm=a.searchedTherm[a.searchedTherm.length-1]):(a.isSearch=!1,a.searchedTherm="")}function p(){q()?s():a.isSearch?r():s()}function q(){var c=j.getConsultant(),d=b.path();if(d=d.split("/"),!a.isConsultantSelected)return!1;if(-1!==d.indexOf(c.cnUserName))return!1;var e=k.getView();return"produtos"===e?(s(),!0):void 0}function r(){a.setLoading(f.loading()),g.loadSearchedProducts(a.searchedTherm).then(function(b){"SUCCESS"===b.status?(a.setHasToLoadMoreProducts(b.currentPage===b.pages?!1:!0),a.title="Produto buscado: "+a.searchedTherm,a.products=b.products):"USER_ERROR"===b.status?"NO_SEARCH_RESULT"===b.userErrorKey&&(a.title="Produto buscado: "+a.searchedTherm,a.productNotFound=!0):a.notificationErrorMessage(h.SEARCH_ERROR),a.setLoading(!f.hasToStopLoading())})}function s(){a.setLoading(f.loading());var d=b.path();d=d.split("-"),d=d[d.length-1],g.loadProducts(d).then(function(b){if("SUCCESS"===b.status){a.setHasToLoadMoreProducts(b.currentPage===b.pages?!1:!0),i.getShowBreadcrumb()?(i.setAccessProductsFromMenu(!1),a.title=i.getBreadcrumb()):(b.categoryName=c("name")(b.categoryName),a.title="<strong>"+b.categoryName+"</strong>");var d=b.categoryName+" | Rede Natura";n(b.categoryName),a.loadPageInformation(void 0,void 0,void 0,d),i.setShowBreadcrumb(!1),b.categoryImageHeader&&(a.bannerCategory=b.categoryImageHeader),b.categoryIframeUrl&&b.categoryIframeHeight&&(a.iframePage=u(b.categoryIframeUrl,b.categoryIframeHeight)),a.products=b.products,a.products=t(a.products)}else"USER_ERROR"===b.status?"LINE_NOT_FOUND"===b.userErrorKey&&(a.productNotFound=!0,a.notificationErrorMessage(h.LINE_NOT_FOUND)):(a.productNotFound=!0,a.notificationErrorMessage(h.LINE_NOT_FOUND));a.setLoading(!f.hasToStopLoading())})}function t(a){for(var b=[],c=!1,d=0;d<a.length;d++)if(null!=a[d]){c=!1;for(var e=0;e<b.length;e++)a[d].sku===b[e].sku&&(c=!0);c===!1&&b.push(a[d])}var f;return f=window.Math.ceil(b.length/B)+1,g.setPage(f),b}function u(a,b){var c=e.trustAsHtml('<iframe class="natura-iframe" scrolling="no" style="height:'+b+'px;" src="'+a+'"></iframe>');return c}function v(b){a.hasToLoadMoreProducts=b}function w(a,b){a.actualIndex=b}function x(b){a.actualProductToSend=b}function y(b){a.showModalSend=b,b||(a.showModalSuccessNotify=!1,a.request={})}function z(b){a.showModalSuccessNotify=b
}function A(b){a.setActualProductToSend(b.sku),a.setShowModalSend(!0)}var B=8;a.methodToLoadProducts=p,a.setHasToLoadMoreProducts=v,a.setSliderIndex=w,a.setActualProductToSend=x,a.setShowModalSend=y,a.showModalNotifyUser=A,a.setShowModalSuccessNotify=z,m()}angular.module("copycatNaturaEcommerceWebApp").controller("ProductCtrl",["$scope","$location","$filter","$window","$sce","VisualService","ProductService","UserErrorService","MenuService","ConsultantService","UrlService","$routeParams",a])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(){b.scroll(0,0),a.setCanonical(i.product?"http://rede.natura.net/espaco/"+i.name+"/"+i.product:"http://rede.natura.net/espaco/"+i.name),a.quantity=null,a.mainProduct={},a.mainProduct.actualIndex=0,a.productDetailsNotFound=!1,l(),a.productsRelated=[],a.actualSelectedIndex=null,a.productSelected={},a.currentURL=""+c.absUrl().toString()}function k(b){"reduce"===b?a.productQuantity!==a.mainProduct.minAllowed&&a.productQuantity--:"more"===b&&a.productQuantity<a.mainProduct.maxAllowed&&a.productQuantity++}function l(){a.setLoading(d.loading());var b=c.path();b=b.split("-"),b=b[b.length-1],f.loadProductDetail(b).then(function(b){if("SUCCESS"===b.status){if(a.mainProduct=b,a.mainProduct.quantity=b.minAllowed?b.minAllowed:1,a.mainProduct.subProducts&&(o(a.mainProduct,0),a.productQuantity=1),b.productsSugestions&&m(b.productsSugestions),void 0!==a.mainProduct.analyzedProductLine){var c=a.mainProduct.analyzedProductLine+", ";t(a.mainProduct.name,a.mainProduct.listImagesMainUrl[0],c)}else t(a.mainProduct.name,a.mainProduct.listImagesMainUrl[0]);a.shareWhatsapp=u(a.mainProduct.name)}else a.notificationErrorMessage(e.PRODUCT_DETAIL_ERROR),a.productDetailsNotFound=!0;a.setLoading(!d.hasToStopLoading())})}function m(a){for(var b=0;2>b;b++)n(a[b])}function n(b){a.setLoading(d.loading()),f.loadProductDetail(b).then(function(b){"SUCCESS"===b.status&&a.productsRelated.push(b),a.setLoading(!d.hasToStopLoading())})}function o(b,c){b.actualIndex=c,a.actualSelectedIndex=c,a.productSelected=a.mainProduct.subProducts[c]}function p(b){a.actualProductToSend=b}function q(b){a.showModalSend=b,b||(a.showModalSuccessNotify=!1,a.request={})}function r(b){a.showModalSuccessNotify=b}function s(b){a.setActualProductToSend(b.sku),a.setShowModalSend(!0)}function t(b,c,d){var e="";e=void 0!==d?d+"Natura, Rede, Rede Natura, Cosméticos, Comprar":"Natura, Rede, Rede Natura, Cosméticos, Comprar";var f=a.mainProduct.name+" | Rede Natura";a.loadPageInformation(c,b,e,f);var g={type:"image",src:c,href:a.currentURL},h=new window.gigya.socialize.UserAction;h.setLinkBack(a.currentURL),h.setTitle("Rede Natura"),h.setDescription(b),h.addMediaItem(g);var i={userAction:h,shareButtons:[{provider:"facebook-share",tooltip:"Compartilhar no Facebook",facebookDialogType:"share"}],containerID:"divButtons",deviceType:"mobile"};window.gigya.socialize.showShareBarUI(i)}function u(){var b=g.trustAsHtml('<div class="whatsapp-3"><div class="whatsapp-image"></div> <a href="whatsapp://send?text='+a.mainProduct.name+" - "+a.currentURL+'" data-action="share/whatsapp/share"><span class="whatsapp-label">Compartilhar</span></a></div>');return b}function v(){h.shareFbCallback()}a.setQuantity=k,a.setSliderIndex=o,a.setActualProductToSend=p,a.setShowModalSend=q,a.showModalNotifyUser=s,a.setShowModalSuccessNotify=r,a.sendFbCallBack=v,j()}angular.module("copycatNaturaEcommerceWebApp").controller("ProductDetailsCtrl",["$scope","$window","$location","VisualService","UserErrorService","ProductService","$sce","GoogleTagManagerService","$routeParams",a])}(),function(){function a(a,b){var c=a.search(),d=c.id;b.get("/api/product/pid"+d).success(function(b){"USER_ERROR"===b.status?"PRODUCT_NOT_FOUND"===b.userErrorKey&&a.path("/"):a.path(b.productUrl,c)})}angular.module("copycatNaturaEcommerceWebApp").controller("RedirectCtrl",["$location","$http",a])}(),function(){function a(a,b,c,d,e){function f(){if(a.forgetPassword){var f={request:{email:a.forgetPassword.email}};if(!a.forgetPassword.email)return!1;if(!a.forgetPassword.email.match(b.email))return a.notificationErrorMessage(c.EMAIL_INVALID),!1;a.setLoading(d.loading()),e.forgotPassword(f).then(function(b){"SUCCESS"===b.status?a.setShowModalSuccessPassword(!0):"USER_ERROR"===b.status?"NO_USER_FOUND"===b.userErrorKey&&a.notificationErrorMessage(c.NO_USER_FOUND):a.notificationErrorMessage(c.FORGET_PASSWORD_ERROR),a.setLoading(!d.hasToStopLoading())})}}a.sendEmailToNewPassword=f}angular.module("copycatNaturaEcommerceWebApp").controller("ModalForgotPasswordCtrl",["$scope","REGEX","UserErrorService","VisualService","EmailService",a])}(),function(){function a(a,b,c,d,e){function f(){if(a.request){var f={request:{email:a.request.email,productId:a.actualProductToSend}};if(!a.request.email)return!1;if(!a.request.email.match(b.email))return a.notificationErrorMessage(c.EMAIL_INVALID),!1;a.setLoading(d.loading()),e.notifyProductUnavailable(f).then(function(b){"SUCCESS"===b.status?(a.setShowModalSuccessNotify(!0),a.setActualProductToSend("")):a.notificationErrorMessage(c.NOTIFY_ERROR),a.setLoading(!d.hasToStopLoading())})}}a.sendEmailToNotifyUser=f}angular.module("copycatNaturaEcommerceWebApp").controller("ModalSendProductUnavailableCtrl",["$scope","REGEX","UserErrorService","VisualService","EmailService",a])}(),function(){function a(a,b,c,d,e){function f(b){return b&&""!==b.trim()?(a.setLoading(d.loading()),void e.calculateDelivery(b.trim()).then(function(b){"SUCCESS"===b.status?(a.delivery=b.result,a.hasCpf=!0):a.notificationErrorMessage("USER_ERROR"===b.status?"ZIPCODE_NOT_FOUND"===b.userErrorKey?c.ZIPCODE_NOT_FOUND:c.ZIPCODE_OUT_OF_RANGE:c.ZIPCODE_OUT_OF_RANGE),a.setLoading(!d.hasToStopLoading())})):(a.notificationErrorMessage("O número de CEP é obrigatório."),void(a.delivery.zipCode=a.delivery.zipCode.trim()))}function g(){a.delivery={},a.hasCpf=!1}a.calculateDelivery=f,a.newQuery=g}angular.module("copycatNaturaEcommerceWebApp").controller("ModalDeliveryCtrl",["$scope","REGEX","UserErrorService","VisualService","DeliveryService",a])}();